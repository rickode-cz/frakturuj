var Zr=Array.isArray,An=Array.prototype.indexOf,_r=Array.from,Br=Object.defineProperty,sr=Object.getOwnPropertyDescriptor,Rr=Object.getOwnPropertyDescriptors,Ur=Object.getPrototypeOf;const _e=()=>{};function Pn(t){return t()}function or(t){for(var e=0;e<t.length;e++)t[e]()}const Ot=2,Vr=4,Oe=8,br=16,Vt=32,xe=64,Pe=128,Rt=256,qe=512,ht=1024,ae=2048,ve=4096,Wt=8192,Ke=16384,qn=32768,gr=65536,Yr=1<<17,Fn=1<<19,Hr=1<<20,Ne=Symbol("$state"),Zn=Symbol("legacy props"),Bn=Symbol("");function Jr(t){return t===this.v}function Kr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Wr(t){return!Kr(t,this.v)}function Rn(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Un(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Vn(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Yn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Hn(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Jn(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Kn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ye=!1;function Wn(){ye=!0}const mr=1,hr=2,Gr=4,Gn=8,Xn=16,Qn=1,ta=2,Xr=1,ea=2,ra=Symbol();function na(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let st=null;function Nr(t){st=t}function Dt(t,e=!1,r){st={p:st,c:null,e:null,m:!1,s:t,x:null,l:null},ye&&!e&&(st.l={s:null,u:null,r1:[],r2:Fe(!1)})}function Et(t){const e=st;if(e!==null){const c=e.e;if(c!==null){var r=X,a=et;e.e=null;try{for(var n=0;n<c.length;n++){var i=c[n];Ut(i.effect),ne(i.reaction),Qe(i.fn)}}finally{Ut(r),ne(a)}}st=e.p,e.m=!0}return{}}function $e(){return!ye||st!==null&&st.l===null}function Fe(t,e){var r={f:0,v:t,reactions:null,equals:Jr,rv:0,wv:0};return r}function xr(t,e=!1){var a;const r=Fe(t);return e||(r.equals=Wr),ye&&st!==null&&st.l!==null&&((a=st.l).s??(a.s=[])).push(r),r}function L(t,e=!1){return aa(xr(t,e))}function aa(t){return et!==null&&!Gt&&et.f&Ot&&(Bt===null?_a([t]):Bt.push(t)),t}function _t(t,e){return m(t,H(()=>s(t))),e}function m(t,e){return et!==null&&!Gt&&$e()&&et.f&(Ot|br)&&(Bt===null||!Bt.includes(t))&&Kn(),Te(t,e)}function Te(t,e){return t.equals(e)||(t.v,t.v=e,t.wv=_n(),Qr(t,ae),$e()&&X!==null&&X.f&ht&&!(X.f&(Vt|xe))&&(Jt===null?ba([t]):Jt.push(t))),e}function Qr(t,e){var r=t.reactions;if(r!==null)for(var a=$e(),n=r.length,i=0;i<n;i++){var c=r[i],v=c.f;v&ae||!a&&c===X||(Pt(c,e),v&(ht|Rt)&&(v&Ot?Qr(c,ve):nr(c)))}}let tn=!1;function Tr(t){return t!==null&&typeof t=="object"&&Ne in t?t[Ne]:t}function ia(t,e){return Object.is(Tr(t),Tr(e))}var Mr,en,rn;function sa(){if(Mr===void 0){Mr=window;var t=Element.prototype,e=Node.prototype;en=sr(e,"firstChild").get,rn=sr(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function We(t=""){return document.createTextNode(t)}function Kt(t){return en.call(t)}function Ge(t){return rn.call(t)}function o(t,e){return Kt(t)}function jt(t,e){{var r=Kt(t);return r instanceof Comment&&r.data===""?Ge(r):r}}function l(t,e=1,r=!1){let a=t;for(;e--;)a=Ge(a);return a}function oa(t){t.textContent=""}function Xe(t){var e=Ot|ae,r=et!==null&&et.f&Ot?et:null;return X===null||r!==null&&r.f&Rt?e|=Rt:X.f|=Hr,{ctx:st,deps:null,effects:null,equals:Jr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??X}}function At(t){const e=Xe(t);return e.equals=Wr,e}function nn(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)re(e[r])}}function la(t){for(var e=t.parent;e!==null;){if(!(e.f&Ot))return e;e=e.parent}return null}function ca(t){var e,r=X;Ut(la(t));try{nn(t),e=gn(t)}finally{Ut(r)}return e}function an(t){var e=ca(t),r=(ue||t.f&Rt)&&t.deps!==null?ve:ht;Pt(t,r),t.equals(e)||(t.v=e,t.wv=_n())}function sn(t){X===null&&et===null&&Vn(),et!==null&&et.f&Rt&&X===null&&Un(),kr&&Rn()}function ua(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function we(t,e,r,a=!0){var n=(t&xe)!==0,i=X,c={ctx:st,deps:null,nodes_start:null,nodes_end:null,f:t|ae,first:null,fn:e,last:null,next:null,parent:n?null:i,prev:null,teardown:null,transitions:null,wv:0};if(r){var v=be;try{Or(!0),rr(c),c.f|=qn}catch(g){throw re(c),g}finally{Or(v)}}else e!==null&&nr(c);var _=r&&c.deps===null&&c.first===null&&c.nodes_start===null&&c.teardown===null&&(c.f&(Hr|Pe))===0;if(!_&&!n&&a&&(i!==null&&ua(c,i),et!==null&&et.f&Ot)){var d=et;(d.effects??(d.effects=[])).push(c)}return c}function on(t){const e=we(Oe,null,!1);return Pt(e,ht),e.teardown=t,e}function lr(t){sn();var e=X!==null&&(X.f&Vt)!==0&&st!==null&&!st.m;if(e){var r=st;(r.e??(r.e=[])).push({fn:t,effect:X,reaction:et})}else{var a=Qe(t);return a}}function va(t){return sn(),tr(t)}function da(t){const e=we(xe,t,!0);return(r={})=>new Promise(a=>{r.outro?Ze(e,()=>{re(e),a(void 0)}):(re(e),a(void 0))})}function Qe(t){return we(Vr,t,!1)}function Y(t,e){var r=st,a={effect:null,ran:!1};r.l.r1.push(a),a.effect=tr(()=>{t(),!a.ran&&(a.ran=!0,m(r.l.r2,!0),H(e))})}function ie(){var t=st;tr(()=>{if(s(t.l.r2)){for(var e of t.l.r1){var r=e.effect;r.f&ht&&Pt(r,ve),ke(r)&&rr(r),e.ran=!1}t.l.r2.v=!1}})}function tr(t){return we(Oe,t,!0)}function nt(t,e=[],r=Xe){const a=e.map(r);return yr(()=>t(...a.map(s)))}function yr(t,e=0){return we(Oe|br|e,t,!0)}function Me(t,e=!0){return we(Oe|Vt,t,!0,e)}function ln(t){var e=t.teardown;if(e!==null){const r=kr,a=et;$r(!0),ne(null);try{e.call(null)}finally{$r(r),ne(a)}}}function cn(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var a=r.next;re(r,e),r=a}}function fa(t){for(var e=t.first;e!==null;){var r=e.next;e.f&Vt||re(e),e=r}}function re(t,e=!0){var r=!1;if((e||t.f&Fn)&&t.nodes_start!==null){for(var a=t.nodes_start,n=t.nodes_end;a!==null;){var i=a===n?null:Ge(a);a.remove(),a=i}r=!0}cn(t,e&&!r),Ye(t,0),Pt(t,Ke);var c=t.transitions;if(c!==null)for(const _ of c)_.stop();ln(t);var v=t.parent;v!==null&&v.first!==null&&un(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function un(t){var e=t.parent,r=t.prev,a=t.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=r))}function Ze(t,e){var r=[];wr(t,r,!0),vn(r,()=>{re(t),e&&e()})}function vn(t,e){var r=t.length;if(r>0){var a=()=>--r||e();for(var n of t)n.out(a)}else e()}function wr(t,e,r){if(!(t.f&Wt)){if(t.f^=Wt,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var a=t.first;a!==null;){var n=a.next,i=(a.f&gr)!==0||(a.f&Vt)!==0;wr(a,e,i?r:!1),a=n}}}function Be(t){dn(t,!0)}function dn(t,e){if(t.f&Wt){t.f^=Wt,t.f&ht||(t.f^=ht),ke(t)&&(Pt(t,ae),nr(t));for(var r=t.first;r!==null;){var a=r.next,n=(r.f&gr)!==0||(r.f&Vt)!==0;dn(r,n?e:!1),r=a}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let cr=!1,ur=[];function pa(){cr=!1;const t=ur.slice();ur=[],or(t)}function fn(t){cr||(cr=!0,queueMicrotask(pa)),ur.push(t)}let Ae=!1,Re=!1,Ue=null,be=!1,kr=!1;function Or(t){be=t}function $r(t){kr=t}let vr=[],Ee=0;let et=null,Gt=!1;function ne(t){et=t}let X=null;function Ut(t){X=t}let Bt=null;function _a(t){Bt=t}let Ct=null,Tt=0,Jt=null;function ba(t){Jt=t}let pn=1,Ve=0,ue=!1,ce=null;function _n(){return++pn}function ke(t){var d;var e=t.f;if(e&ae)return!0;if(e&ve){var r=t.deps,a=(e&Rt)!==0;if(r!==null){var n,i,c=(e&qe)!==0,v=a&&X!==null&&!ue,_=r.length;if(c||v){for(n=0;n<_;n++)i=r[n],(c||!((d=i==null?void 0:i.reactions)!=null&&d.includes(t)))&&(i.reactions??(i.reactions=[])).push(t);c&&(t.f^=qe)}for(n=0;n<_;n++)if(i=r[n],ke(i)&&an(i),i.wv>t.wv)return!0}(!a||X!==null&&!ue)&&Pt(t,ht)}return!1}function ga(t,e){for(var r=e;r!==null;){if(r.f&Pe)try{r.fn(t);return}catch{r.f^=Pe}r=r.parent}throw Ae=!1,t}function ma(t){return(t.f&Ke)===0&&(t.parent===null||(t.parent.f&Pe)===0)}function er(t,e,r,a){if(Ae){if(r===null&&(Ae=!1),ma(e))throw t;return}r!==null&&(Ae=!0);{ga(t,e);return}}function bn(t,e,r=0){var a=t.reactions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n];i.f&Ot?bn(i,e,r+1):e===i&&(r===0?Pt(i,ae):i.f&ht&&Pt(i,ve),nr(i))}}function gn(t){var x;var e=Ct,r=Tt,a=Jt,n=et,i=ue,c=Bt,v=st,_=Gt,d=t.f;Ct=null,Tt=0,Jt=null,et=d&(Vt|xe)?null:t,ue=(d&Rt)!==0&&(!be||(n===null||_)&&t.parent!==null),Bt=null,Nr(t.ctx),Gt=!1,Ve++;try{var g=(0,t.fn)(),h=t.deps;if(Ct!==null){var u;if(Ye(t,Tt),h!==null&&Tt>0)for(h.length=Tt+Ct.length,u=0;u<Ct.length;u++)h[Tt+u]=Ct[u];else t.deps=h=Ct;if(!ue)for(u=Tt;u<h.length;u++)((x=h[u]).reactions??(x.reactions=[])).push(t)}else h!==null&&Tt<h.length&&(Ye(t,Tt),h.length=Tt);if($e()&&Jt!==null&&!(t.f&(Ot|ve|ae)))for(u=0;u<Jt.length;u++)bn(Jt[u],t);return n!==null&&Ve++,g}finally{Ct=e,Tt=r,Jt=a,et=n,ue=i,Bt=c,Nr(v),Gt=_}}function ha(t,e){let r=e.reactions;if(r!==null){var a=An.call(r,t);if(a!==-1){var n=r.length-1;n===0?r=e.reactions=null:(r[a]=r[n],r.pop())}}r===null&&e.f&Ot&&(Ct===null||!Ct.includes(e))&&(Pt(e,ve),e.f&(Rt|qe)||(e.f^=qe),nn(e),Ye(e,0))}function Ye(t,e){var r=t.deps;if(r!==null)for(var a=e;a<r.length;a++)ha(t,r[a])}function rr(t){var e=t.f;if(!(e&Ke)){Pt(t,ht);var r=X,a=st;X=t;try{e&br?fa(t):cn(t),ln(t);var n=gn(t);t.teardown=typeof n=="function"?n:null,t.wv=pn;var i=t.deps,c}catch(v){er(v,t,r,a||t.ctx)}finally{X=r}}}function xa(){if(Ee>1e3){Ee=0;try{Yn()}catch(t){if(Ue!==null)er(t,Ue,null);else throw t}}Ee++}function ya(t){var e=t.length;if(e!==0){xa();var r=be;be=!0;try{for(var a=0;a<e;a++){var n=t[a];n.f&ht||(n.f^=ht);var i=[];mn(n,i),wa(i)}}finally{be=r}}}function wa(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var a=t[r];if(!(a.f&(Ke|Wt)))try{ke(a)&&(rr(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?un(a):a.fn=null))}catch(n){er(n,a,null,a.ctx)}}}function ka(){if(Re=!1,Ee>1001)return;const t=vr;vr=[],ya(t),Re||(Ee=0,Ue=null)}function nr(t){Re||(Re=!0,queueMicrotask(ka)),Ue=t;for(var e=t;e.parent!==null;){e=e.parent;var r=e.f;if(r&(xe|Vt)){if(!(r&ht))return;e.f^=ht}}vr.push(e)}function mn(t,e){var r=t.first,a=[];t:for(;r!==null;){var n=r.f,i=(n&Vt)!==0,c=i&&(n&ht)!==0,v=r.next;if(!c&&!(n&Wt))if(n&Oe){if(i)r.f^=ht;else{var _=et;try{et=r,ke(r)&&rr(r)}catch(u){er(u,r,null,r.ctx)}finally{et=_}}var d=r.first;if(d!==null){r=d;continue}}else n&Vr&&a.push(r);if(v===null){let u=r.parent;for(;u!==null;){if(t===u)break t;var g=u.next;if(g!==null){r=g;continue t}u=u.parent}}r=v}for(var h=0;h<a.length;h++)d=a[h],e.push(d),mn(d,e)}function s(t){var e=t.f,r=(e&Ot)!==0;if(ce!==null&&ce.add(t),et!==null&&!Gt){Bt!==null&&Bt.includes(t)&&Jn();var a=et.deps;t.rv<Ve&&(t.rv=Ve,Ct===null&&a!==null&&a[Tt]===t?Tt++:Ct===null?Ct=[t]:Ct.push(t))}else if(r&&t.deps===null&&t.effects===null){var n=t,i=n.parent;i!==null&&!(i.f&Rt)&&(n.f^=Rt)}return r&&(n=t,ke(n)&&an(n)),t.v}function za(t){var e=ce;ce=new Set;var r=ce,a;try{if(H(t),e!==null)for(a of ce)e.add(a)}finally{ce=e}return r}function ze(t){var e=za(()=>H(t));for(var r of e)if(r.f&Yr)for(const a of r.deps||[])a.f&Ot||Te(a,a.v);else Te(r,r.v)}function H(t){var e=Gt;try{return Gt=!0,t()}finally{Gt=e}}const Ca=-7169;function Pt(t,e){t.f=t.f&Ca|e}function Xt(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ne in t)dr(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Ne in r&&dr(r)}}}function dr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let a in t)try{dr(t[a],e)}catch{}const r=Ur(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=Rr(r);for(let n in a){const i=a[n].get;if(i)try{i.call(t)}catch{}}}}}const Da=["touchstart","touchmove"];function Ea(t){return Da.includes(t)}let Ir=!1;function Sa(){Ir||(Ir=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function hn(t){var e=et,r=X;ne(null),Ut(null);try{return t()}finally{ne(e),Ut(r)}}function xn(t,e,r,a=r){t.addEventListener(e,()=>hn(r));const n=t.__on_r;n?t.__on_r=()=>{n(),a(!0)}:t.__on_r=()=>a(!0),Sa()}const Na=new Set,Lr=new Set;function Ta(t,e,r,a={}){function n(i){if(a.capture||Ce.call(e,i),!i.cancelBubble)return hn(()=>r==null?void 0:r.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?fn(()=>{e.addEventListener(t,n,a)}):e.addEventListener(t,n,a),n}function q(t,e,r,a,n){var i={capture:a,passive:n},c=Ta(t,e,r,i);(e===document.body||e===window||e===document)&&on(()=>{e.removeEventListener(t,c,i)})}function Ce(t){var E;var e=this,r=e.ownerDocument,a=t.type,n=((E=t.composedPath)==null?void 0:E.call(t))||[],i=n[0]||t.target,c=0,v=t.__root;if(v){var _=n.indexOf(v);if(_!==-1&&(e===document||e===window)){t.__root=e;return}var d=n.indexOf(e);if(d===-1)return;_<=d&&(c=_)}if(i=n[c]||t.target,i!==e){Br(t,"currentTarget",{configurable:!0,get(){return i||r}});var g=et,h=X;ne(null),Ut(null);try{for(var u,x=[];i!==null;){var y=i.assignedSlot||i.parentNode||i.host||null;try{var I=i["__"+a];if(I!==void 0&&!i.disabled)if(Zr(I)){var[D,...f]=I;D.apply(i,[t,...f])}else I.call(i,t)}catch(P){u?x.push(P):u=P}if(t.cancelBubble||y===e||y===null)break;i=y}if(u){for(let P of x)queueMicrotask(()=>{throw P});throw u}}finally{t.__root=e,delete t.currentTarget,ne(g),Ut(h)}}}function yn(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function ge(t,e){var r=X;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function R(t,e){var r=(e&Xr)!==0,a=(e&ea)!==0,n,i=!t.startsWith("<!>");return()=>{n===void 0&&(n=yn(i?t:"<!>"+t),r||(n=Kt(n)));var c=a?document.importNode(n,!0):n.cloneNode(!0);if(r){var v=Kt(c),_=c.lastChild;ge(v,_)}else ge(c,c);return c}}function Qt(t,e,r="svg"){var a=!t.startsWith("<!>"),n=(e&Xr)!==0,i=`<${r}>${a?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var v=yn(i),_=Kt(v);if(n)for(c=document.createDocumentFragment();Kt(_);)c.appendChild(Kt(_));else c=Kt(_)}var d=c.cloneNode(!0);if(n){var g=Kt(d),h=d.lastChild;ge(g,h)}else ge(d,d);return d}}function Ie(t=""){{var e=We(t+"");return ge(e,e),e}}function wn(){var t=document.createDocumentFragment(),e=document.createComment(""),r=We();return t.append(e,r),ge(e,r),t}function M(t,e){t!==null&&t.before(e)}function $(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Ma(t,e){return Oa(t,e)}const fe=new Map;function Oa(t,{target:e,anchor:r,props:a={},events:n,context:i,intro:c=!0}){sa();var v=new Set,_=h=>{for(var u=0;u<h.length;u++){var x=h[u];if(!v.has(x)){v.add(x);var y=Ea(x);e.addEventListener(x,Ce,{passive:y});var I=fe.get(x);I===void 0?(document.addEventListener(x,Ce,{passive:y}),fe.set(x,1)):fe.set(x,I+1)}}};_(_r(Na)),Lr.add(_);var d=void 0,g=da(()=>{var h=r??e.appendChild(We());return Me(()=>{if(i){Dt({});var u=st;u.c=i}n&&(a.$$events=n),d=t(h,a)||{},i&&Et()}),()=>{var y;for(var u of v){e.removeEventListener(u,Ce);var x=fe.get(u);--x===0?(document.removeEventListener(u,Ce),fe.delete(u)):fe.set(u,x)}Lr.delete(_),h!==r&&((y=h.parentNode)==null||y.removeChild(h))}});return $a.set(d,g),d}let $a=new WeakMap;function tt(t,e,r=!1){var a=t,n=null,i=null,c=ra,v=r?gr:0,_=!1;const d=(h,u=!0)=>{_=!0,g(u,h)},g=(h,u)=>{c!==(c=h)&&(c?(n?Be(n):u&&(n=Me(()=>u(a))),i&&Ze(i,()=>{i=null})):(i?Be(i):u&&(i=Me(()=>u(a))),n&&Ze(n,()=>{n=null})))};yr(()=>{_=!1,e(d),_||g(null,null)},v)}function me(t,e){return e}function Ia(t,e,r,a){for(var n=[],i=e.length,c=0;c<i;c++)wr(e[c].e,n,!0);var v=i>0&&n.length===0&&r!==null;if(v){var _=r.parentNode;oa(_),_.append(r),a.clear(),ee(t,e[0].prev,e[i-1].next)}vn(n,()=>{for(var d=0;d<i;d++){var g=e[d];v||(a.delete(g.k),ee(t,g.prev,g.next)),re(g.e,!v)}})}function he(t,e,r,a,n,i=null){var c=t,v={items:new Map,first:null},_=(e&Gr)!==0;if(_){var d=t;c=d.appendChild(We())}var g=null,h=!1,u=At(()=>{var x=r();return Zr(x)?x:x==null?[]:_r(x)});yr(()=>{var x=s(u),y=x.length;h&&y===0||(h=y===0,La(x,v,c,n,e,a,r),i!==null&&(y===0?g?Be(g):g=Me(()=>i(c)):g!==null&&Ze(g,()=>{g=null})),s(u))})}function La(t,e,r,a,n,i,c){var W,vt,ot,lt;var v=(n&Gn)!==0,_=(n&(mr|hr))!==0,d=t.length,g=e.items,h=e.first,u=h,x,y=null,I,D=[],f=[],E,P,C,N;if(v)for(N=0;N<d;N+=1)E=t[N],P=i(E,N),C=g.get(P),C!==void 0&&((W=C.a)==null||W.measure(),(I??(I=new Set)).add(C));for(N=0;N<d;N+=1){if(E=t[N],P=i(E,N),C=g.get(P),C===void 0){var k=u?u.e.nodes_start:r;y=Aa(k,e,y,y===null?e.first:y.next,E,P,N,a,n,c),g.set(P,y),D=[],f=[],u=y.next;continue}if(_&&ja(C,E,N,n),C.e.f&Wt&&(Be(C.e),v&&((vt=C.a)==null||vt.unfix(),(I??(I=new Set)).delete(C))),C!==u){if(x!==void 0&&x.has(C)){if(D.length<f.length){var z=f[0],Z;y=z.prev;var Q=D[0],O=D[D.length-1];for(Z=0;Z<D.length;Z+=1)jr(D[Z],z,r);for(Z=0;Z<f.length;Z+=1)x.delete(f[Z]);ee(e,Q.prev,O.next),ee(e,y,Q),ee(e,O,z),u=z,y=O,N-=1,D=[],f=[]}else x.delete(C),jr(C,u,r),ee(e,C.prev,C.next),ee(e,C,y===null?e.first:y.next),ee(e,y,C),y=C;continue}for(D=[],f=[];u!==null&&u.k!==P;)u.e.f&Wt||(x??(x=new Set)).add(u),f.push(u),u=u.next;if(u===null)continue;C=u}D.push(C),y=C,u=C.next}if(u!==null||x!==void 0){for(var K=x===void 0?[]:_r(x);u!==null;)u.e.f&Wt||K.push(u),u=u.next;var U=K.length;if(U>0){var ut=n&Gr&&d===0?r:null;if(v){for(N=0;N<U;N+=1)(ot=K[N].a)==null||ot.measure();for(N=0;N<U;N+=1)(lt=K[N].a)==null||lt.fix()}Ia(e,K,ut,g)}}v&&fn(()=>{var ct;if(I!==void 0)for(C of I)(ct=C.a)==null||ct.apply()}),X.first=e.first&&e.first.e,X.last=y&&y.e}function ja(t,e,r,a){a&mr&&Te(t.v,e),a&hr?Te(t.i,r):t.i=r}function Aa(t,e,r,a,n,i,c,v,_,d){var g=(_&mr)!==0,h=(_&Xn)===0,u=g?h?xr(n):Fe(n):n,x=_&hr?Fe(c):c,y={i:x,v:u,k:i,a:null,e:null,prev:r,next:a};try{return y.e=Me(()=>v(t,u,x,d),tn),y.e.prev=r&&r.e,y.e.next=a&&a.e,r===null?e.first=y:(r.next=y,r.e.next=y.e),a!==null&&(a.prev=y,a.e.prev=y.e),y}finally{}}function jr(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,i=t.e.nodes_start;i!==a;){var c=Ge(i);n.before(i),i=c}}function ee(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function fr(t,e,r,a){var n=t.__attributes??(t.__attributes={});n[e]!==(n[e]=r)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Bn]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Pa(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var Ar=new Map;function Pa(t){var e=Ar.get(t.nodeName);if(e)return e;Ar.set(t.nodeName,e=[]);for(var r,a=t,n=Element.prototype;n!==a;){r=Rr(a);for(var i in r)r[i].set&&e.push(i);a=Ur(a)}return e}function kn(t,e,r){var a=t.__className,n=qa(e);(a!==n||tn)&&(e==null?t.removeAttribute("class"):t.className=n,t.__className=n)}function qa(t,e){return(t??"")+""}function Pr(t,e,r){if(r){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function it(t,e,r=e){var a=$e();xn(t,"input",n=>{var i=n?t.defaultValue:t.value;if(i=ar(t)?ir(i):i,r(i),a&&i!==(i=e())){var c=t.selectionStart,v=t.selectionEnd;t.value=i??"",v!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(v,t.value.length))}}),H(e)==null&&t.value&&r(ar(t)?ir(t.value):t.value),tr(()=>{var n=e();ar(t)&&n===ir(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function ar(t){var e=t.type;return e==="number"||e==="range"}function ir(t){return t===""?null:+t}function zn(t,e,r){if(t.multiple)return Ba(t,e);for(var a of t.options){var n=Se(a);if(ia(n,e)){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Fa(t,e){Qe(()=>{var r=new MutationObserver(()=>{var a=t.__value;zn(t,a)});return r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Za(t,e,r=e){var a=!0;xn(t,"change",n=>{var i=n?"[selected]":":checked",c;if(t.multiple)c=[].map.call(t.querySelectorAll(i),Se);else{var v=t.querySelector(i)??t.querySelector("option:not([disabled])");c=v&&Se(v)}r(c)}),Qe(()=>{var n=e();if(zn(t,n,a),a&&n===void 0){var i=t.querySelector(":checked");i!==null&&(n=Se(i),r(n))}t.__value=n,a=!1}),Fa(t)}function Ba(t,e){for(var r of t.options)r.selected=~e.indexOf(Se(r))}function Se(t){return"__value"in t?t.__value:t.value}function zr(t){return function(...e){var r=e[0];return r.preventDefault(),t==null?void 0:t.apply(this,e)}}function Mt(t=!1){const e=st,r=e.l.u;if(!r)return;let a=()=>Xt(e.s);if(t){let n=0,i={};const c=Xe(()=>{let v=!1;const _=e.s;for(const d in _)_[d]!==i[d]&&(i[d]=_[d],v=!0);return v&&n++,n});a=()=>s(c)}r.b.length&&va(()=>{qr(e,a),or(r.b)}),lr(()=>{const n=H(()=>r.m.map(Pn));return()=>{for(const i of n)typeof i=="function"&&i()}}),r.a.length&&lr(()=>{qr(e,a),or(r.a)})}function qr(t,e){if(t.l.s)for(const r of t.l.s)s(r);e()}function Cn(t,e,r){if(t==null)return e(void 0),_e;const a=H(()=>t.subscribe(e,r));return a.unsubscribe?()=>a.unsubscribe():a}const pe=[];function Le(t,e=_e){let r=null;const a=new Set;function n(v){if(Kr(t,v)&&(t=v,r)){const _=!pe.length;for(const d of a)d[1](),pe.push(d,t);if(_){for(let d=0;d<pe.length;d+=2)pe[d][0](pe[d+1]);pe.length=0}}}function i(v){n(v(t))}function c(v,_=_e){const d=[v,_];return a.add(d),a.size===1&&(r=e(n,i)||_e),v(t),()=>{a.delete(d),a.size===0&&r&&(r(),r=null)}}return{set:n,update:i,subscribe:c}}function Ra(t){let e;return Cn(t,r=>e=r)(),e}let je=!1,pr=Symbol();function Lt(t,e,r){const a=r[e]??(r[e]={store:null,source:xr(void 0),unsubscribe:_e});if(a.store!==t&&!(pr in r))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=_e;else{var n=!0;a.unsubscribe=Cn(t,i=>{n?a.source.v=i:m(a.source,i)}),n=!1}return t&&pr in r?Ra(t):s(a.source)}function se(){const t={};function e(){on(()=>{for(var r in t)t[r].unsubscribe();Br(t,pr,{enumerable:!1,value:!0})})}return[t,e]}function It(t,e,r){return t.set(r),e}function Ua(t){var e=je;try{return je=!1,[t(),je]}finally{je=e}}function Va(t){for(var e=X,r=X;e!==null&&!(e.f&(Vt|xe));)e=e.parent;try{return Ut(e),t()}finally{Ut(r)}}function at(t,e,r,a){var I;var n=(r&Qn)!==0,i=!ye||(r&ta)!==0,c=!1,v;[v,c]=Ua(()=>t[e]);var _=Ne in t||Zn in t,d=(((I=sr(t,e))==null?void 0:I.set)??(_&&e in t&&(D=>t[e]=D)))||void 0,g=a,h=!0,u=()=>(h&&(h=!1,g=a),g);v===void 0&&a!==void 0&&(d&&i&&Hn(),v=u(),d&&d(v));var x;if(i)x=()=>{var D=t[e];return D===void 0?u():(h=!0,D)};else{var y=Va(()=>(n?Xe:At)(()=>t[e]));y.f|=Yr,x=()=>{var D=s(y);return D!==void 0&&(g=void 0),D===void 0?g:D}}return x}function Dn(t){st===null&&na(),ye&&st.l!==null?Ya(st).m.push(t):lr(()=>{const e=H(t);if(typeof e=="function")return e})}function Ya(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ha="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ha);Wn();const qt=Le(null),De=Le(new Date().getFullYear()),kt=Le({title:"",ico:"",dic:"",street:"",city:"",psc:"",country:"Česká republika",email:"",phone:"",bank_account:"",bank_code:""}),He=Le(!1),zt=Le(null),Ja=window.location.origin+"/wp-json";var Fr;let En=(Fr=window.wpSettings)==null?void 0:Fr.nonce,Je;async function Ka(){try{const t=await Ft("/rk/refresh-nonce",{method:"GET",headers:{"Content-Type":"application/json"}});t.nonce&&(En=t.nonce)}catch(t){console.error("Failed to refresh nonce:",t)}}function Wa(){Je||(Je=setInterval(Ka,10*60*1e3))}async function Ft(t,e={}){var n;const r={Accept:"application/json","X-WP-Nonce":En},a=await fetch(`${Ja}${t}`,{...e,credentials:"include",headers:{...r,...e.headers}});if(!((n=e.headers)!=null&&n.Accept)||e.headers.Accept==="application/json"){const i=await a.json();if(!a.ok)throw new Error(i.message||"API call failed");return i}if(!a.ok)throw new Error("API call failed");return a}async function Ga(){return Ft("/rk/data")}async function Xa(t){return Ft("/rk/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function Qa(t){return Ft("/rk/customer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function ti(t,e){return Ft(`/rk/customer/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function ei(t){return Ft(`/rk/customer/${t}`,{method:"DELETE"})}async function ri(t){return Ft(`/rk/invoice/${t}/toggle-paid`,{method:"POST"})}async function ni(t){return Ft("/rk/invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function ai(t,e){return Ft(`/rk/invoice/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function ii(t){return Ft(`/rk/invoice/${t}`,{method:"DELETE"})}async function si(t){var c;const e=await Ft(`/rk/invoice/${t}/pdf`,{method:"GET",headers:{Accept:"application/pdf"}}),r=((c=e.headers.get("Content-Disposition"))==null?void 0:c.split("filename=")[1])||`invoice-${t}.pdf`,a=await e.blob(),n=window.URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}window.addEventListener("unload",()=>{Je&&clearInterval(Je)});var oi=R('<div class="bg-zinc-800 p-4 sm:p-6 rounded-lg"><h2 class="text-xl sm:text-2xl mb-4">Přehled</h2> <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6"><div><p class="text-zinc-400">Vystavené faktury</p> <p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Splatné tento týden</p> <p class="text-2xl sm:text-3xl font-bold text-green-500"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Po splatnosti</p> <p class="text-2xl sm:text-3xl font-bold text-red-500"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Zaplaceno tento měsíc</p> <p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Zaplaceno minulý měsíc</p> <p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Zaplaceno tento rok</p> <p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-500"> </p></div></div></div>');function li(t,e){Dt(e,!1);const r=L(),a=L(),n=L(),i=L(),c=L(),v=L(),_=L(),d=L(),g=L(),h=L(),u=L(),x=L(),y=L();let I=at(e,"data",8);const D=new Date,f=D.getFullYear(),E=D.getMonth(),P=E-1,C=7,N=new Date(D.getTime()+C*24*60*60*1e3);Y(()=>Xt(I()),()=>{var p;m(r,((p=I())==null?void 0:p.invoices)||[])}),Y(()=>s(r),()=>{m(a,s(r).filter(p=>!p.acf.paid).reduce((p,B)=>{var b;const G=((b=JSON.parse(B.acf.items))==null?void 0:b.items)||[];return p+G.reduce((w,j)=>w+(j.price_per_unit||0)*(j.quantity||0),0)},0))}),Y(()=>s(r),()=>{m(n,s(r).filter(p=>!p.acf.paid&&new Date(p.acf.maturity)<D).reduce((p,B)=>{var b;const G=((b=JSON.parse(B.acf.items))==null?void 0:b.items)||[];return p+G.reduce((w,j)=>w+(j.price_per_unit||0)*(j.quantity||0),0)},0))}),Y(()=>s(r),()=>{m(i,s(r).filter(p=>p.acf.paid&&new Date(p.created_date).getFullYear()===f).reduce((p,B)=>{var b;const G=((b=JSON.parse(B.acf.items))==null?void 0:b.items)||[];return p+G.reduce((w,j)=>w+(j.price_per_unit||0)*(j.quantity||0),0)},0))}),Y(()=>s(r),()=>{m(c,s(r).filter(p=>p.acf.paid&&new Date(p.created_date).getMonth()===E&&new Date(p.created_date).getFullYear()===f).reduce((p,B)=>{var b;const G=((b=JSON.parse(B.acf.items))==null?void 0:b.items)||[];return p+G.reduce((w,j)=>w+(j.price_per_unit||0)*(j.quantity||0),0)},0))}),Y(()=>s(r),()=>{m(v,s(r).filter(p=>p.acf.paid&&new Date(p.created_date).getMonth()===P&&new Date(p.created_date).getFullYear()===f).reduce((p,B)=>{var b;const G=((b=JSON.parse(B.acf.items))==null?void 0:b.items)||[];return p+G.reduce((w,j)=>w+(j.price_per_unit||0)*(j.quantity||0),0)},0))}),Y(()=>s(r),()=>{m(_,s(r).filter(p=>!p.acf.paid&&new Date(p.acf.maturity)>D&&new Date(p.acf.maturity)<=N).reduce((p,B)=>{var b;const G=((b=JSON.parse(B.acf.items))==null?void 0:b.items)||[];return p+G.reduce((w,j)=>w+(j.price_per_unit||0)*(j.quantity||0),0)},0))}),Y(()=>s(r),()=>{m(d,s(r).filter(p=>!p.acf.paid).length)}),Y(()=>s(r),()=>{m(g,s(r).filter(p=>!p.acf.paid&&new Date(p.acf.maturity)<D).length)}),Y(()=>s(r),()=>{m(h,s(r).filter(p=>p.acf.paid&&new Date(p.created_date).getFullYear()===f).length)}),Y(()=>s(r),()=>{m(u,s(r).filter(p=>p.acf.paid&&new Date(p.created_date).getMonth()===E&&new Date(p.created_date).getFullYear()===f).length)}),Y(()=>s(r),()=>{m(x,s(r).filter(p=>p.acf.paid&&new Date(p.created_date).getMonth()===P&&new Date(p.created_date).getFullYear()===f).length)}),Y(()=>s(r),()=>{m(y,s(r).filter(p=>!p.acf.paid&&new Date(p.acf.maturity)>D&&new Date(p.acf.maturity)<=N).length)}),ie(),Mt();var k=oi(),z=l(o(k),2),Z=o(z),Q=l(o(Z),2),O=o(Q),K=l(Q,2),U=o(K),ut=l(Z,2),W=l(o(ut),2),vt=o(W),ot=l(W,2),lt=o(ot),ct=l(ut,2),dt=l(o(ct),2),bt=o(dt),T=l(dt,2),V=o(T),rt=l(ct,2),ft=l(o(rt),2),gt=o(ft),mt=l(ft,2),$t=o(mt),xt=l(rt,2),St=l(o(xt),2),Yt=o(St),Zt=l(St,2),Ht=o(Zt),S=l(xt,2),F=l(o(S),2),A=o(F),J=l(F,2),yt=o(J);nt((p,B,G,b,w,j)=>{$(O,`${p??""} Kč`),$(U,`Počet: ${s(d)??""}`),$(vt,`${B??""} Kč`),$(lt,`Počet: ${s(y)??""}`),$(bt,`${G??""} Kč`),$(V,`Počet: ${s(g)??""}`),$(gt,`${b??""} Kč`),$($t,`Počet: ${s(u)??""}`),$(Yt,`${w??""} Kč`),$(Ht,`Počet: ${s(x)??""}`),$(A,`${j??""} Kč`),$(yt,`Počet: ${s(h)??""}`)},[()=>s(a).toLocaleString("cs-CZ"),()=>s(_).toLocaleString("cs-CZ"),()=>s(n).toLocaleString("cs-CZ"),()=>s(c).toLocaleString("cs-CZ"),()=>s(v).toLocaleString("cs-CZ"),()=>s(i).toLocaleString("cs-CZ")],At),M(t,k),Et()}var ci=Qt('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Mažu...',1),ui=R('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/3 md:inset-y-1/3 bg-zinc-800 rounded-lg shadow-xl z-[999]"><div class="p-6 h-full flex flex-col"><div class="flex justify-between items-start"><h2 class="text-2xl">Smazat fakturu</h2> <button class="cursor-pointer text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="my-6 text-zinc-300"><p>Opravdu chcete smazat fakturu <strong> </strong>?</p> <p class="mt-2 text-red-400">Tuto akci nelze vrátit zpět!</p></div> <div class="flex gap-4 mt-auto"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-red-600 rounded hover:bg-red-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></div></div>',1);function vi(t,e){Dt(e,!1);let r=at(e,"invoice",8),a=at(e,"onClose",8),n=L(!1);async function i(){try{m(n,!0),await ii(r().id),qt.update(k=>({...k,invoices:k.invoices.filter(z=>z.id!==r().id)})),zt.set({type:"success",message:"Faktura byla smazána"}),a()()}catch(k){zt.set({type:"error",message:k.message||"Nepodařilo se smazat fakturu"})}finally{m(n,!1)}}Mt();var c=ui(),v=jt(c),_=l(v,2),d=o(_),g=o(d),h=l(o(g),2),u=l(g,2),x=o(u),y=l(o(x)),I=o(y),D=l(u,2),f=o(D),E=l(f,2),P=o(E);{var C=k=>{var z=ci();M(k,z)},N=k=>{var z=Ie("Smazat fakturu");M(k,z)};tt(P,k=>{s(n)?k(C):k(N,!1)})}nt(()=>{$(I,r().title),f.disabled=s(n),E.disabled=s(n)}),q("click",v,function(...k){var z;(z=a())==null||z.apply(this,k)}),q("click",h,function(...k){var z;(z=a())==null||z.apply(this,k)}),q("click",f,function(...k){var z;(z=a())==null||z.apply(this,k)}),q("click",E,i),M(t,c),Et()}var di=R('<span class="text-xs bg-green-900 text-green-300 px-2 py-1 rounded">Zaplaceno</span>'),fi=R('<span class="text-xs bg-red-900 text-red-300 px-2 py-1 rounded">Po splatnosti</span>'),pi=R('<span class="text-xs bg-yellow-900 text-yellow-300 px-2 py-1 rounded">Čeká na platbu</span>'),_i=Qt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>'),bi=Qt('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>'),gi=R('<div class="flex flex-col sm:flex-row justify-between text-xs sm:text-base gap-1"><div><span class="text-zinc-300"> </span> <span class="text-zinc-500 ml-2"> </span></div> <div class="text-zinc-300"> </div></div>'),mi=R('<div class="mt-3 sm:mt-4 border-t border-zinc-600 pt-3 sm:pt-4"><div class="space-y-2"></div></div>'),hi=R('<div class="bg-zinc-700 p-3 sm:p-4 rounded-lg"><div class="flex flex-col sm:flex-row justify-between items-start gap-2 sm:gap-0"><div><h3 class="font-bold text-xl"> </h3> <p class="text-base text-zinc-400"> </p></div> <div class="text-left sm:text-right w-full sm:w-auto"><p class="font-bold text-xl"> </p> <p class="text-base text-zinc-400"> </p></div></div> <div class="mt-3 sm:mt-2 flex flex-wrap sm:flex-nowrap justify-between items-center gap-2"><div class="flex items-center gap-2"><!> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors"><!></button></div> <div class="flex gap-2"><button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Stáhnout PDF"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Duplikovat fakturu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Zobrazit detail"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Upravit fakturu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-red-500 hover:bg-zinc-600 rounded-lg transition-colors" title="Smazat fakturu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg></button></div></div> <!></div> <!>',1);function xi(t,e){Dt(e,!1);const[r,a]=se(),n=()=>Lt(qt,"$apiData",r);let i=at(e,"invoice",8),c=at(e,"customerName",8),v=at(e,"onEdit",8),_=at(e,"expanded",8,!1),d=at(e,"onShowDetails",8),g=at(e,"onDuplicate",8),h=L(!1),u=L([]);function x(A){var yt;return(((yt=JSON.parse(A))==null?void 0:yt.items)||[]).reduce((p,B)=>p+B.price_per_unit*B.quantity,0)}function y(){n().profile.user_id,si(i().id)}async function I(){try{const A=await ri(i().id);qt.update(J=>({...J,invoices:J.invoices.map(yt=>yt.id===i().id?A.invoice:yt)})),zt.set({type:"success",message:A.invoice.acf.paid?"Faktura byla označena jako zaplacená":"Faktura byla označena jako nezaplacená"})}catch{zt.set({type:"error",message:"Nepodařilo se změnit stav faktury"})}}function D(){m(h,!0)}function f(){d()&&d()(i().id)}function E(){g()&&g()(i())}Y(()=>Xt(i()),()=>{var A;try{m(u,((A=JSON.parse(i().acf.items))==null?void 0:A.items)||[])}catch(J){console.error("Failed to parse invoice items:",J),m(u,[])}}),ie(),Mt();var P=hi(),C=jt(P),N=o(C),k=o(N),z=o(k),Z=o(z),Q=l(z,2),O=o(Q),K=l(k,2),U=o(K),ut=o(U),W=l(U,2),vt=o(W),ot=l(N,2),lt=o(ot),ct=o(lt);{var dt=A=>{var J=di();M(A,J)},bt=A=>{var J=wn(),yt=jt(J);{var p=G=>{var b=fi();M(G,b)},B=G=>{var b=pi();M(G,b)};tt(yt,G=>{new Date(i().acf.maturity)<new Date?G(p):G(B,!1)},!0)}M(A,J)};tt(ct,A=>{i().acf.paid?A(dt):A(bt,!1)})}var T=l(ct,2),V=o(T);{var rt=A=>{var J=_i();M(A,J)},ft=A=>{var J=bi();M(A,J)};tt(V,A=>{i().acf.paid?A(ft,!1):A(rt)})}var gt=l(lt,2),mt=o(gt),$t=l(mt,2),xt=l($t,2),St=l(xt,2),Yt=l(St,2),Zt=l(ot,2);{var Ht=A=>{var J=mi(),yt=o(J);he(yt,5,()=>s(u),me,(p,B)=>{var G=gi(),b=o(G),w=o(b),j=o(w),pt=l(w,2),wt=o(pt),te=l(b,2),oe=o(te);nt((le,de)=>{$(j,s(B).name),$(wt,`${s(B).quantity??""}
        ${s(B).units??""} × ${le??""} Kč`),$(oe,`${de??""} Kč`)},[()=>s(B).price_per_unit.toLocaleString("cs-CZ"),()=>(s(B).quantity*s(B).price_per_unit).toLocaleString("cs-CZ")],At),M(p,G)}),M(A,J)};tt(Zt,A=>{_()&&A(Ht)})}var S=l(C,2);{var F=A=>{vi(A,{get invoice(){return i()},onClose:()=>m(h,!1)})};tt(S,A=>{s(h)&&A(F)})}nt((A,J)=>{$(Z,i().title),$(O,`Pro: ${c()??""}`),$(ut,`${A??""} Kč`),$(vt,`Splatnost: ${J??""}`),fr(T,"title",i().acf.paid?"Označit jako nezaplacené":"Označit jako zaplacené")},[()=>x(i().acf.items).toLocaleString("cs-CZ"),()=>new Date(i().acf.maturity).toLocaleDateString("cs-CZ")],At),q("click",T,I),q("click",mt,y),q("click",$t,E),q("click",xt,f),q("click",St,()=>v()(i())),q("click",Yt,D),M(t,P),Et(),a()}var yi=R("<option> </option>"),wi=R('<div class="flex gap-2 mb-2"><button type="button" class="px-3 py-1 text-base bg-zinc-700 hover:bg-zinc-600 rounded">Dnes</button> <button type="button" class="px-3 py-1 text-base bg-zinc-700 hover:bg-zinc-600 rounded">10 dní</button> <button type="button" class="px-3 py-1 text-base bg-zinc-700 hover:bg-zinc-600 rounded">14 dní</button> <button type="button" class="px-3 py-1 text-base bg-zinc-700 hover:bg-zinc-600 rounded">Měsíc</button></div>'),ki=R('<p class="text-red-500 text-base"> </p>'),zi=R('<hr class="border-zinc-700 my-4">'),Ci=R('<div class="space-y-4"><div><label class="block text-base text-zinc-400 mb-1">Název položky</label> <input type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div class="grid grid-cols-2 sm:grid-cols-6 gap-4"><div class="col-span-1 sm:col-span-2"><label class="block text-base text-zinc-400 mb-1">Cena/j.</label> <input type="number" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" min="0" step="1" required></div> <div class="col-span-2 sm:col-span-2"><label class="block text-base text-zinc-400 mb-1">Počet</label> <input type="number" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" min="0" step="0.1" required></div> <div class="col-span-1 sm:col-span-2"><div class="flex items-end gap-2 h-full"><div class="flex-1"><label class="block text-base text-zinc-400 mb-1">Jednotka</label> <input type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <button type="button" class="cursor-pointer p-2 text-zinc-400 hover:text-red-500 hover:bg-zinc-600 rounded"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg></button></div></div></div> <p class="text-right text-base text-zinc-400"> </p> <!></div>'),Di=Qt('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Ukládám...',1),Ei=R('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/4 md:inset-y-16 bg-zinc-800 rounded-lg shadow-xl z-[999] overflow-y-auto"><div class="p-6 flex flex-col h-full"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl"> </h2> <button class="cursor-pointer text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-4 flex-1 flex flex-col"><div class="grid grid-cols-2 gap-4"><div><label for="title" class="block text-base text-zinc-400 mb-1">Číslo faktury</label> <input id="title" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="customer" class="block text-base text-zinc-400 mb-1">Zákazník</label> <select id="customer" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required><option>Vyberte zákazníka</option><!></select></div></div> <div><label for="maturity" class="block text-base text-zinc-400 mb-1">Datum splatnosti</label> <!> <input id="maturity" type="date" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <!> <div class="border border-zinc-700 rounded-lg p-4"><h3 class="text-lg mb-4">Položky faktury</h3> <div class="space-y-6"></div> <button type="button" class="cursor-pointer mt-4 w-full px-4 py-2 bg-zinc-700 rounded hover:bg-zinc-600 flex items-center justify-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg> Přidat položku</button></div> <div class="flex justify-between items-center py-4 border-t border-zinc-700"><span class="text-lg">Celková částka:</span> <span class="text-2xl font-bold"> </span></div> <div class="flex gap-4 mt-auto"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="submit" class="cursor-pointer flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></form></div></div>',1);function Si(t,e){var G;Dt(e,!1);const[r,a]=se(),n=()=>Lt(qt,"$apiData",r),i=L(),c=L(),v=L();at(e,"isOpen",8);let _=at(e,"onClose",8),d=at(e,"editData",8,null),g=at(e,"duplicatingInvoice",8,null),h=L(!1),u=L(null);function x(){const b=new Date;return b.setDate(b.getDate()+14),b.toISOString().split("T")[0]}function y(b){const w=new Date;return w.setDate(w.getDate()+b),w.toISOString().split("T")[0]}function I(b){_t(f,s(f).maturity=y(b))}function D(){var j;if(!((j=n())!=null&&j.invoices))return"";const b=new Date().getFullYear(),w=n().invoices.filter(pt=>new Date(pt.created_date).getFullYear()===b);return`${b}-${String(w.length+1).padStart(2,"0")}`}let f=L({title:"",customer:"",maturity:x(),items:[]});!d()&&((G=n())!=null&&G.invoices)&&m(f,{...s(f),title:D(),maturity:x()});function E(){return{name:"",price_per_unit:"",units:"h",quantity:"1"}}function P(){_t(f,s(f).items=[...s(f).items,E()])}function C(b){_t(f,s(f).items=s(f).items.filter((w,j)=>j!==b))}async function N(){try{if(!s(f).customer){m(u,"Vyberte zákazníka");return}m(h,!0),m(u,null);const b={...s(f),items:JSON.stringify({items:s(f).items})},w=d()&&!g()?await ai(d().id,b):await ni(b);qt.update(j=>({...j,invoices:d()&&!g()?j.invoices.map(pt=>{var wt;return pt.id===((wt=d())==null?void 0:wt.id)&&!g()?w.invoice:pt}):[...j.invoices,w.invoice]})),zt.set({type:"success",message:d()&&!g()?"Faktura byla upravena":"Faktura byla vytvořena"}),setTimeout(_(),500)}catch(b){m(u,b.message),zt.set({type:"error",message:s(u)})}finally{m(h,!1)}}Y(()=>n(),()=>{var b;m(i,((b=n())==null?void 0:b.customers)||[])}),Y(()=>Xt(d()),()=>{var b,w,j,pt,wt,te,oe,le;if(d()){const de=((j=JSON.parse((w=(b=d())==null?void 0:b.acf)==null?void 0:w.items))==null?void 0:j.items)||[];m(f,{title:((pt=d())==null?void 0:pt.title)||D(),customer:(te=(wt=d())==null?void 0:wt.acf)==null?void 0:te.customer,maturity:((le=(oe=d())==null?void 0:oe.acf)==null?void 0:le.maturity)||x(),items:de.length?de:[E()]})}}),Y(()=>s(f),()=>{s(f).items.length||_t(f,s(f).items=[E()])}),Y(()=>s(f),()=>{m(c,s(f).items.map(b=>(b.price_per_unit||0)*(b.quantity||0)))}),Y(()=>s(c),()=>{m(v,s(c).reduce((b,w)=>b+w,0))}),ie(),Mt();var k=Ei(),z=jt(k),Z=l(z,2),Q=o(Z),O=o(Q),K=o(O),U=o(K),ut=l(K,2),W=l(O,2),vt=o(W),ot=o(vt),lt=l(o(ot),2),ct=l(ot,2),dt=l(o(ct),2);nt(()=>{s(f),ze(()=>{s(i)})});var bt=o(dt);bt.value=((bt.__value="")==null,"");var T=l(bt);he(T,1,()=>s(i),me,(b,w)=>{var j=yi(),pt={},wt=o(j);nt(()=>{pt!==(pt=s(w).id)&&(j.value=(j.__value=s(w).id)==null?"":s(w).id),$(wt,s(w).title)}),M(b,j)});var V=l(vt,2),rt=l(o(V),2);{var ft=b=>{var w=wi(),j=o(w),pt=l(j,2),wt=l(pt,2),te=l(wt,2);q("click",j,()=>I(0)),q("click",pt,()=>I(10)),q("click",wt,()=>I(14)),q("click",te,()=>I(30)),M(b,w)};tt(rt,b=>{(!d()||g())&&b(ft)})}var gt=l(rt,2),mt=l(V,2);{var $t=b=>{var w=ki(),j=o(w);nt(()=>$(j,s(u))),M(b,w)};tt(mt,b=>{s(u)&&b($t)})}var xt=l(mt,2),St=l(o(xt),2);he(St,5,()=>s(f).items,me,(b,w,j)=>{var pt=Ci(),wt=o(pt),te=l(o(wt),2),oe=l(wt,2),le=o(oe),de=l(o(le),2),Cr=l(le,2),Nn=l(o(Cr),2),Tn=l(Cr,2),Mn=o(Tn),Dr=o(Mn),On=l(o(Dr),2),Er=l(Dr,2),Sr=l(oe,2),$n=o(Sr),In=l(Sr,2);{var Ln=Nt=>{var jn=zi();M(Nt,jn)};tt(In,Nt=>{j<s(f).items.length-1&&Nt(Ln)})}nt(Nt=>{Er.disabled=s(f).items.length===1,$($n,`Celkem: ${Nt??""} Kč`)},[()=>s(c)[j].toLocaleString("cs-CZ")],At),it(te,()=>s(w).name,Nt=>(s(w).name=Nt,ze(()=>s(f).items))),it(de,()=>s(w).price_per_unit,Nt=>(s(w).price_per_unit=Nt,ze(()=>s(f).items))),it(Nn,()=>s(w).quantity,Nt=>(s(w).quantity=Nt,ze(()=>s(f).items))),it(On,()=>s(w).units,Nt=>(s(w).units=Nt,ze(()=>s(f).items))),q("click",Er,()=>C(j)),M(b,pt)});var Yt=l(St,2),Zt=l(xt,2),Ht=l(o(Zt),2),S=o(Ht),F=l(Zt,2),A=o(F),J=l(A,2),yt=o(J);{var p=b=>{var w=Di();M(b,w)},B=b=>{var w=Ie();nt(()=>$(w,d()?"Uložit změny":"Vytvořit fakturu")),M(b,w)};tt(yt,b=>{s(h)?b(p):b(B,!1)})}nt(b=>{$(U,d()&&!g()?"Upravit fakturu":"Nová faktura"),$(S,`${b??""} Kč`),A.disabled=s(h),J.disabled=s(h)},[()=>s(v).toLocaleString("cs-CZ")],At),q("click",z,function(...b){var w;(w=_())==null||w.apply(this,b)}),q("click",ut,function(...b){var w;(w=_())==null||w.apply(this,b)}),it(lt,()=>s(f).title,b=>_t(f,s(f).title=b)),Za(dt,()=>s(f).customer,b=>_t(f,s(f).customer=b)),it(gt,()=>s(f).maturity,b=>_t(f,s(f).maturity=b)),q("click",Yt,P),q("click",A,function(...b){var w;(w=_())==null||w.apply(this,b)}),q("submit",W,zr(N)),M(t,k),Et(),a()}var Ni=R("<button> </button>"),Ti=R('<div class="bg-zinc-800 p-4 sm:p-6 rounded-lg"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0 mb-6"><div class="flex flex-col sm:flex-row items-start sm:items-center gap-4"><h2 class="text-xl sm:text-2xl">Faktury</h2> <button class="cursor-pointer px-4 py-2 bg-green-600 rounded hover:bg-green-700 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path></svg> Nová faktura</button></div> <div class="flex flex-wrap gap-2 w-full sm:w-auto"></div></div> <div class="space-y-4"></div> <div class="bg-zinc-700/50 p-4 rounded-lg mt-6"><div class="flex justify-between items-center"><p class="text-zinc-400"> </p> <div class="text-right"><p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-400"> </p></div></div></div> <!></div>');function Mi(t,e){Dt(e,!1);const[r,a]=se(),n=()=>Lt(De,"$selectedYear",r),i=L(),c=L(),v=L(),_=L(),d=L();let g=at(e,"data",8);function h(T){var V;return((V=s(c).find(rt=>rt.id===T))==null?void 0:V.title)||"Unknown"}let u=L(!1),x=L(null),y=L(null);function I(T){m(x,T),m(u,!0)}function D(){m(u,!1),m(x,null),m(y,null)}let f=L({});function E(T){_t(f,s(f)[T]=!s(f)[T]),m(f,s(f))}function P(T){const V={acf:{customer:T.acf.customer,items:T.acf.items}};m(x,V),m(y,!0),m(u,!0)}Y(()=>Xt(g()),()=>{var T;m(i,((T=g())==null?void 0:T.invoices)||[])}),Y(()=>Xt(g()),()=>{var T;m(c,((T=g())==null?void 0:T.customers)||[])}),Y(()=>s(i),()=>{m(v,[...new Set(s(i).map(T=>new Date(T.created_date).getFullYear()))].sort((T,V)=>V-T))}),Y(()=>(s(v),n(),De),()=>{s(v).length&&!s(v).includes(n())&&De.set(s(v)[0])}),Y(()=>(s(i),n()),()=>{m(_,s(i).filter(T=>new Date(T.created_date).getFullYear()===n()).sort((T,V)=>new Date(V.created_date)-new Date(T.created_date)))}),Y(()=>s(_),()=>{m(d,{count:s(_).length,total:s(_).reduce((T,V)=>{var ft;const rt=((ft=JSON.parse(V.acf.items))==null?void 0:ft.items)||[];return T+rt.reduce((gt,mt)=>gt+(mt.price_per_unit||0)*(mt.quantity||0),0)},0)})}),ie(),Mt();var C=Ti(),N=o(C),k=o(N),z=l(o(k),2),Z=l(k,2);he(Z,5,()=>s(v),me,(T,V)=>{var rt=Ni(),ft=o(rt);nt(()=>{kn(rt,`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded cursor-pointer text-base sm:text-base
          ${(n()===s(V)?"bg-zinc-600 text-white":"text-zinc-400 hover:bg-zinc-700")??""}`),$(ft,s(V))}),q("click",rt,()=>De.set(s(V))),M(T,rt)});var Q=l(N,2);he(Q,5,()=>s(_),me,(T,V)=>{const rt=At(()=>h(s(V).acf.customer));xi(T,{get invoice(){return s(V)},get customerName(){return s(rt)},get expanded(){return s(f)[s(V).id]},onShowDetails:E,onEdit:I,onDuplicate:()=>{P(s(V))}})});var O=l(Q,2),K=o(O),U=o(K),ut=o(U),W=l(U,2),vt=o(W),ot=o(vt),lt=l(vt,2),ct=o(lt),dt=l(O,2);{var bt=T=>{Si(T,{get isOpen(){return s(u)},onClose:D,get editData(){return s(x)},get duplicatingInvoice(){return s(y)}})};tt(dt,T=>{s(u)&&T(bt)})}nt(T=>{$(ut,`Celkem za rok ${n()??""}`),$(ot,`${T??""} Kč`),$(ct,`Počet faktur: ${s(d).count??""}`)},[()=>s(d).total.toLocaleString("cs-CZ")],At),q("click",z,()=>m(u,!0)),M(t,C),Et(),a()}async function Sn(t){const e=await fetch(`https://ares.gov.cz/ekonomicke-subjekty-v-be/rest/ekonomicke-subjekty/${t}`);if(!e.ok)throw new Error("API call failed");const r=await e.json();return{title:r.obchodniJmeno||"",ico:r.ico||"",dic:r.dic||"",street:`${r.sidlo.nazevUlice} ${r.sidlo.cisloDomovni}/${r.sidlo.cisloOrientacni}`,city:`${r.sidlo.nazevObce}${r.sidlo.nazevCastiObce?" - "+r.sidlo.nazevCastiObce:""}`,psc:r.sidlo.psc||""}}var Oi=R('<p class="text-red-500 text-base"> </p>'),$i=Qt('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Ukládám...',1),Ii=R('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/4 md:inset-y-24 bg-zinc-800 rounded-lg shadow-xl z-[999] overflow-y-auto"><div class="p-6 h-full flex flex-col"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl"> </h2> <button class="cursor-pointer text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-4 flex-1 flex flex-col"><div class="flex gap-4"><div class="flex-grow"><label for="customer_ico" class="block text-base text-zinc-400 mb-1">IČO</label> <input id="customer_ico" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="12345678"></div> <div class="flex items-end"><button type="button" class="cursor-pointer px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 disabled:opacity-50"> </button></div></div> <!> <div><label for="title" class="block text-base text-zinc-400 mb-1">Název firmy/Jméno</label> <input id="title" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="dic" class="block text-base text-zinc-400 mb-1">DIČ</label> <input id="dic" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></div> <div><label for="street" class="block text-base text-zinc-400 mb-1">Ulice</label> <input id="street" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div class="grid grid-cols-2 gap-4"><div><label for="city" class="block text-base text-zinc-400 mb-1">Město</label> <input id="city" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="psc" class="block text-base text-zinc-400 mb-1">PSČ</label> <input id="psc" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div></div> <div><label for="country" class="block text-base text-zinc-400 mb-1">Země</label> <input id="country" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="email" class="block text-base text-zinc-400 mb-1">Email</label> <input id="email" type="email" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></div> <div class="flex gap-4 pt-4 mt-auto"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="submit" class="cursor-pointer flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></form></div></div>',1);function Li(t,e){Dt(e,!1),at(e,"isOpen",8);let r=at(e,"onClose",8),a=at(e,"editData",8,null),n=L({title:"",ico:"",dic:"",street:"",city:"",psc:"",country:"Česká republika",email:""}),i=L(!1),c=L(!1),v=L(null);async function _(){if(!s(n).ico||s(n).ico.length!==8){m(v,"IČO musí mít 8 číslic");return}try{m(i,!0),m(v,null);const S=await Sn(s(n).ico);m(n,{...s(n),...S})}catch{m(v,"Nepodařilo se načíst data z ARES")}finally{m(i,!1)}}function d(S){const F=S.customer;return{...F,id:Number(F.id),acf:{ico:F.acf.ico||"",dic:F.acf.dic||"",street:F.acf.street||"",city:F.acf.city||"",psc:F.acf.psc||"",country:F.acf.country||"",email:F.acf.email||""}}}async function g(){try{m(c,!0),m(v,null);const S=a()?await ti(Number(a().id),s(n)):await Qa(s(n)),F=d(S);qt.update(A=>({...A,customers:a()?A.customers.map(J=>Number(J.id)===Number(a().id)?F:J):[...A.customers,F]})),zt.set({type:"success",message:a()?"Zákazník byl úspěšně upraven":"Zákazník byl úspěšně vytvořen"}),setTimeout(r(),500)}catch(S){m(v,S.message),zt.set({type:"error",message:s(v)})}finally{m(c,!1)}}Y(()=>Xt(a()),()=>{a()&&m(n,{title:a().title,ico:a().acf.ico||"",dic:a().acf.dic||"",street:a().acf.street||"",city:a().acf.city||"",psc:a().acf.psc||"",country:a().acf.country||"Česká republika",email:a().acf.email||""})}),ie(),Mt();var h=Ii(),u=jt(h),x=l(u,2),y=o(x),I=o(y),D=o(I),f=o(D),E=l(D,2),P=l(I,2),C=o(P),N=o(C),k=l(o(N),2),z=l(N,2),Z=o(z),Q=o(Z),O=l(C,2);{var K=S=>{var F=Oi(),A=o(F);nt(()=>$(A,s(v))),M(S,F)};tt(O,S=>{s(v)&&S(K)})}var U=l(O,2),ut=l(o(U),2),W=l(U,2),vt=l(o(W),2),ot=l(W,2),lt=l(o(ot),2),ct=l(ot,2),dt=o(ct),bt=l(o(dt),2),T=l(dt,2),V=l(o(T),2),rt=l(ct,2),ft=l(o(rt),2),gt=l(rt,2),mt=l(o(gt),2),$t=l(gt,2),xt=o($t),St=l(xt,2),Yt=o(St);{var Zt=S=>{var F=$i();M(S,F)},Ht=S=>{var F=Ie();nt(()=>$(F,a()?"Uložit změny":"Vytvořit zákazníka")),M(S,F)};tt(Yt,S=>{s(c)?S(Zt):S(Ht,!1)})}nt(()=>{$(f,`${(a()?"Upravit":"Nový")??""} zákazník`),Z.disabled=s(i),$(Q,s(i)?"Načítám...":"Načíst"),xt.disabled=s(c),St.disabled=s(c)}),q("click",u,function(...S){var F;(F=r())==null||F.apply(this,S)}),q("click",E,function(...S){var F;(F=r())==null||F.apply(this,S)}),it(k,()=>s(n).ico,S=>_t(n,s(n).ico=S)),q("click",Z,_),it(ut,()=>s(n).title,S=>_t(n,s(n).title=S)),it(vt,()=>s(n).dic,S=>_t(n,s(n).dic=S)),it(lt,()=>s(n).street,S=>_t(n,s(n).street=S)),it(bt,()=>s(n).city,S=>_t(n,s(n).city=S)),it(V,()=>s(n).psc,S=>_t(n,s(n).psc=S)),it(ft,()=>s(n).country,S=>_t(n,s(n).country=S)),it(mt,()=>s(n).email,S=>_t(n,s(n).email=S)),q("click",xt,function(...S){var F;(F=r())==null||F.apply(this,S)}),q("submit",P,zr(g)),M(t,h),Et()}var ji=Qt('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Mažu...',1),Ai=R('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/3 md:inset-y-1/3 bg-zinc-800 rounded-lg shadow-xl z-[999]"><div class="p-6 h-full flex flex-col"><div class="flex justify-between items-start"><h2 class="text-2xl">Smazat zákazníka</h2> <button class="text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="my-6 text-zinc-300"><p>Opravdu chcete smazat zákazníka <strong> </strong>?</p> <p class="mt-2 text-red-400">Budou smazány i všechny faktury tohoto zákazníka!</p></div> <div class="flex gap-4 mt-auto"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-red-600 rounded hover:bg-red-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></div></div>',1);function Pi(t,e){Dt(e,!1);let r=at(e,"customer",8),a=at(e,"onClose",8),n=L(!1);async function i(){try{m(n,!0);const k=await ei(r().id);qt.update(z=>({...z,customers:z.customers.filter(Z=>Z.id!==r().id),invoices:z.invoices.filter(Z=>Number(Z.acf.customer)!==Number(r().id))})),zt.set({type:"success",message:`Zákazník byl smazán včetně ${k.deleted_invoices} faktur`}),a()()}catch(k){zt.set({type:"error",message:k.message||"Nepodařilo se smazat zákazníka"})}finally{m(n,!1)}}Mt();var c=Ai(),v=jt(c),_=l(v,2),d=o(_),g=o(d),h=l(o(g),2),u=l(g,2),x=o(u),y=l(o(x)),I=o(y),D=l(u,2),f=o(D),E=l(f,2),P=o(E);{var C=k=>{var z=ji();M(k,z)},N=k=>{var z=Ie("Smazat zákazníka");M(k,z)};tt(P,k=>{s(n)?k(C):k(N,!1)})}nt(()=>{$(I,r().title),f.disabled=s(n),E.disabled=s(n)}),q("click",v,function(...k){var z;(z=a())==null||z.apply(this,k)}),q("click",h,function(...k){var z;(z=a())==null||z.apply(this,k)}),q("click",f,function(...k){var z;(z=a())==null||z.apply(this,k)}),q("click",E,i),M(t,c),Et()}var qi=R('<p class="text-blue-400"> </p>'),Fi=R('<div class="p-4 pt-0 border-t border-zinc-600"><div class="mt-2 text-base text-zinc-400 space-y-1"><p> </p> <p> </p> <p> </p> <p> </p> <p> </p> <!></div></div>'),Zi=R('<div class="bg-zinc-700 rounded-lg overflow-hidden"><div class="p-4"><div class="flex flex-col sm:flex-row justify-between items-start gap-1"><div><h3 class="font-bold text-xl"> </h3> <p class="text-base text-zinc-400"> </p></div> <p class="font-bold text-xl"> </p></div> <div class="flex justify-end gap-2 mt-4"><button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Zobrazit detail"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Upravit zákazníka"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-red-500 hover:bg-zinc-600 rounded-lg transition-colors" title="Smazat zákazníka"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg></button></div></div> <!></div>');function Bi(t,e){Dt(e,!1);let r=at(e,"customer",8),a=at(e,"stats",8),n=at(e,"expanded",8),i=at(e,"onShowDetails",8),c=at(e,"onEdit",8),v=at(e,"onDelete",8);function _(){i()(r().id)}Mt();var d=Zi(),g=o(d),h=o(g),u=o(h),x=o(u),y=o(x),I=l(x,2),D=o(I),f=l(u,2),E=o(f),P=l(h,2),C=o(P),N=l(C,2),k=l(N,2),z=l(g,2);{var Z=Q=>{var O=Fi(),K=o(O),U=o(K),ut=o(U),W=l(U,2),vt=o(W),ot=l(W,2),lt=o(ot),ct=l(ot,2),dt=o(ct),bt=l(ct,2),T=o(bt),V=l(bt,2);{var rt=ft=>{var gt=qi(),mt=o(gt);nt(()=>$(mt,r().acf.email)),M(ft,gt)};tt(V,ft=>{r().acf.email&&ft(rt)})}nt(()=>{$(ut,`IČO: ${r().acf.ico??""}`),$(vt,`DIČ: ${r().acf.dic??""}`),$(lt,r().acf.street),$(dt,`${r().acf.psc??""} ${r().acf.city??""}`),$(T,r().acf.country)}),M(Q,O)};tt(z,Q=>{n()&&Q(Z)})}nt(Q=>{$(y,r().title),$(D,`Počet faktur: ${a().count??""}`),$(E,`${Q??""} Kč`)},[()=>a().total.toLocaleString("cs-CZ")],At),q("click",C,_),q("click",N,()=>c()(r())),q("click",k,()=>v()(r())),M(t,d),Et()}var Ri=R('<div class="bg-zinc-800 p-6 rounded-lg"><div class="flex items-center gap-x-4 mb-4"><h2 class="text-2xl">Zákazníci</h2> <button class="cursor-pointer px-4 py-2 bg-green-600 rounded hover:bg-green-700 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path></svg> Nový zákazník</button></div> <div class="space-y-4"></div></div> <!> <!>',1);function Ui(t,e){Dt(e,!1);const[r,a]=se(),n=()=>Lt(De,"$selectedYear",r),i=L(),c=L();let v=at(e,"data",8),_=L({});function d(O){const K=Number(O),U=s(c).filter(W=>Number(W.acf.customer)===K&&W.acf.maturity&&new Date(W.acf.maturity).getFullYear()===n()),ut=U.reduce((W,vt)=>{var ot;try{const lt=((ot=JSON.parse(vt.acf.items))==null?void 0:ot.items)||[];return W+lt.reduce((ct,dt)=>ct+(dt.price_per_unit||0)*(dt.quantity||0),0)}catch(lt){return console.error("Failed to parse invoice items:",lt),W}},0);return{count:U.length,total:ut,invoices:U}}function g(O){_t(_,s(_)[O]=!s(_)[O]),m(_,s(_))}let h=L(!1),u=L(null),x=L(null);function y(O){m(u,O),m(h,!0)}function I(){m(h,!1),m(u,null)}function D(O){m(x,O)}Y(()=>Xt(v()),()=>{var O;m(i,((O=v())==null?void 0:O.customers)||[])}),Y(()=>Xt(v()),()=>{var O;m(c,((O=v())==null?void 0:O.invoices)||[])}),ie(),Mt();var f=Ri(),E=jt(f),P=o(E),C=l(o(P),2),N=l(P,2);he(N,5,()=>s(i),me,(O,K)=>{const U=At(()=>d(s(K).id));Bi(O,{get customer(){return s(K)},get stats(){return s(U)},get expanded(){return s(_)[s(K).id]},onShowDetails:g,onEdit:y,onDelete:D})});var k=l(E,2);{var z=O=>{Li(O,{get isOpen(){return s(h)},onClose:I,get editData(){return s(u)}})};tt(k,O=>{s(h)&&O(z)})}var Z=l(k,2);{var Q=O=>{Pi(O,{get customer(){return s(x)},onClose:()=>m(x,null)})};tt(Z,O=>{s(x)&&O(Q)})}q("click",C,()=>m(h,!0)),M(t,f),Et(),a()}var Vi=R('<p class="text-red-500 text-base"> </p>'),Yi=Qt('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Ukládám...',1),Hi=R('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/4 md:inset-y-24 bg-zinc-800 rounded-lg shadow-xl z-[999] overflow-y-auto"><div class="p-6"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl">Můj profil</h2> <button class="cursor-pointer text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-4"><div class="flex gap-4"><div class="flex-grow"><label for="ico" class="block text-base text-zinc-400 mb-1">IČO</label> <input id="ico" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="12345678"></div> <div class="flex items-end"><button type="button" class="cursor-pointer px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 disabled:opacity-50"> </button></div></div> <!> <div><label for="title" class="block text-base text-zinc-400 mb-1">Název firmy/Jméno</label> <input id="title" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="dic" class="block text-base text-zinc-400 mb-1">DIČ</label> <input id="dic" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></div> <div><label for="street" class="block text-base text-zinc-400 mb-1">Ulice</label> <input id="street" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div class="grid grid-cols-2 gap-4"><div><label for="city" class="block text-base text-zinc-400 mb-1">Město</label> <input id="city" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="psc" class="block text-base text-zinc-400 mb-1">PSČ</label> <input id="psc" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div></div> <div><label for="country" class="block text-base text-zinc-400 mb-1">Země</label> <input id="country" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="email" class="block text-base text-zinc-400 mb-1">Email</label> <input id="email" type="email" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></div> <div><label for="phone" class="block text-base text-zinc-400 mb-1">Telefon</label> <input id="phone" type="tel" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></div> <div class="grid grid-cols-2 gap-4"><div><label for="bank_account" class="block text-base text-zinc-400 mb-1">Číslo účtu</label> <input id="bank_account" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="bank_code" class="block text-base text-zinc-400 mb-1">Kód banky</label> <input id="bank_code" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div></div> <div class="flex gap-4 pt-4"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="submit" class="cursor-pointer flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></form></div></div>',1);function Ji(t,e){Dt(e,!1);const[r,a]=se(),n=()=>Lt(kt,"$profile",r);let i=L(!1),c=L(!1),v=L(null);async function _(){if(!n().ico||n().ico.length!==8){m(v,"IČO musí mít 8 číslic");return}try{m(i,!0),m(v,null);const p=await Sn(n().ico);kt.set({...n(),...p})}catch{m(v,"Nepodařilo se načíst data z ARES")}finally{m(i,!1)}}async function d(){try{m(c,!0),m(v,null);const p=await Xa(n());p.status==="success"&&(qt.update(B=>({...B,profile:p.profile})),zt.set({type:"success",message:"Profil byl úspěšně uložen"}),setTimeout(g,500))}catch{m(v,null),zt.set({type:"error",message:"Nepodařilo se uložit profil. Zkuste to prosím znovu."})}finally{m(c,!1)}}function g(){He.set(!1)}Mt();var h=Hi(),u=jt(h),x=l(u,2),y=o(x),I=o(y),D=l(o(I),2),f=l(I,2),E=o(f),P=o(E),C=l(o(P),2),N=l(P,2),k=o(N),z=o(k),Z=l(E,2);{var Q=p=>{var B=Vi(),G=o(B);nt(()=>$(G,s(v))),M(p,B)};tt(Z,p=>{s(v)&&p(Q)})}var O=l(Z,2),K=l(o(O),2),U=l(O,2),ut=l(o(U),2),W=l(U,2),vt=l(o(W),2),ot=l(W,2),lt=o(ot),ct=l(o(lt),2),dt=l(lt,2),bt=l(o(dt),2),T=l(ot,2),V=l(o(T),2),rt=l(T,2),ft=l(o(rt),2),gt=l(rt,2),mt=l(o(gt),2),$t=l(gt,2),xt=o($t),St=l(o(xt),2),Yt=l(xt,2),Zt=l(o(Yt),2),Ht=l($t,2),S=o(Ht),F=l(S,2),A=o(F);{var J=p=>{var B=Yi();M(p,B)},yt=p=>{var B=Ie("Uložit profil");M(p,B)};tt(A,p=>{s(c)?p(J):p(yt,!1)})}nt(()=>{k.disabled=s(i),$(z,s(i)?"Načítám...":"Načíst"),S.disabled=s(c),F.disabled=s(c)}),q("click",u,g),q("click",D,g),it(C,()=>n().ico,p=>It(kt,H(n).ico=p,H(n))),q("click",k,_),it(K,()=>n().title,p=>It(kt,H(n).title=p,H(n))),it(ut,()=>n().dic,p=>It(kt,H(n).dic=p,H(n))),it(vt,()=>n().street,p=>It(kt,H(n).street=p,H(n))),it(ct,()=>n().city,p=>It(kt,H(n).city=p,H(n))),it(bt,()=>n().psc,p=>It(kt,H(n).psc=p,H(n))),it(V,()=>n().country,p=>It(kt,H(n).country=p,H(n))),it(ft,()=>n().email,p=>It(kt,H(n).email=p,H(n))),it(mt,()=>n().phone,p=>It(kt,H(n).phone=p,H(n))),it(St,()=>n().bank_account,p=>It(kt,H(n).bank_account=p,H(n))),it(Zt,()=>n().bank_code,p=>It(kt,H(n).bank_code=p,H(n))),q("click",S,g),q("submit",f,zr(d)),M(t,h),Et(),a()}var Ki=R('<a class="px-5.5 py-2 bg-red-500 rounded hover:bg-red-700 text-center">Odhlásit se</a>'),Wi=R('<div class="flex flex-col sm:flex-row justify-between items-center sm:items-start gap-4 sm:gap-0"><div class="text-center sm:text-left"><h2 class="text-2xl"> </h2> <p class="text-base text-zinc-400 mt-1"> </p></div> <div class="flex flex-row sm:flex-col items-center sm:items-end gap-2"><button class="cursor-pointer px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Upravit profil</button> <!></div></div>'),Gi=R('<a class="px-6 py-3 bg-red-500 rounded hover:bg-red-700 text-center">Odhlásit se</a>'),Xi=R('<div class="text-center"><h2 class="text-2xl mb-4">Fakturační údaje</h2> <p class="text-zinc-400 mb-4">Pro vytváření faktur je potřeba vyplnit vaše fakturační údaje</p> <div class="flex flex-row justify-center items-center gap-2"><button class="px-6 py-3 bg-green-600 rounded hover:bg-green-700 font-medium">Vyplnit údaje</button> <!></div></div>'),Qi=R('<div class="bg-zinc-800 p-4 sm:p-6 rounded-lg"><!></div> <!>',1);function ts(t,e){Dt(e,!1);const[r,a]=se(),n=()=>Lt(kt,"$profile",r),i=()=>Lt(qt,"$apiData",r),c=()=>Lt(He,"$isProfileModalOpen",r),v=L(),_=L();function d(){He.set(!0)}Y(()=>n(),()=>{m(v,n().title&&n().ico)}),Y(()=>i(),()=>{var f;m(_,(f=i())==null?void 0:f.wp_logout_url)}),ie(),Mt();var g=Qi(),h=jt(g),u=o(h);{var x=f=>{var E=Wi(),P=o(E),C=o(P),N=o(C),k=l(C,2),z=o(k),Z=l(P,2),Q=o(Z),O=l(Q,2);{var K=U=>{var ut=Ki();nt(()=>fr(ut,"href",s(_))),M(U,ut)};tt(O,U=>{s(_)&&U(K)})}nt(()=>{$(N,n().title),$(z,`IČO: ${n().ico??""}`)}),q("click",Q,d),M(f,E)},y=f=>{var E=Xi(),P=l(o(E),4),C=o(P),N=l(C,2);{var k=z=>{var Z=Gi();nt(()=>fr(Z,"href",s(_))),M(z,Z)};tt(N,z=>{s(_)&&z(k)})}q("click",C,d),M(f,E)};tt(u,f=>{s(v)?f(x):f(y,!1)})}var I=l(h,2);{var D=f=>{Ji(f,{})};tt(I,f=>{c()&&f(D)})}M(t,g),Et(),a()}var es=Qt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),rs=Qt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),ns=R('<div class="fixed top-4 right-4 left-4 md:left-auto md:right-4 md:w-96 p-4 rounded-lg shadow-lg z-50 transition-all duration-300 transform translate-y-0 opacity-100" role="alert"><div class="flex items-center gap-3"><!> <p class="text-white font-medium"> </p></div></div>');function as(t,e){Dt(e,!1);const[r,a]=se(),n=()=>Lt(zt,"$notification",r);let i=L();Dn(()=>()=>{s(i)&&clearTimeout(s(i))}),Y(()=>(n(),s(i),zt),()=>{n()&&(s(i)&&clearTimeout(s(i)),m(i,setTimeout(()=>{zt.set(null)},2e3)))}),ie(),Mt();var c=wn(),v=jt(c);{var _=d=>{var g=ns(),h=o(g),u=o(h);{var x=f=>{var E=es();M(f,E)},y=f=>{var E=rs();M(f,E)};tt(u,f=>{n().type==="success"?f(x):f(y,!1)})}var I=l(u,2),D=o(I);nt(()=>{Pr(g,"bg-green-500",n().type==="success"),Pr(g,"bg-red-500",n().type==="error"),$(D,n().message)}),M(d,g)};tt(v,d=>{n()&&d(_)})}M(t,c),Et(),a()}var is=R('<p class="prose prose-xl md:prose-2xl prose-invert my-4 md:my-8 mx-auto text-center animate-pulse">Načítám si svoje serepetičky...</p>'),ss=R('<div class="grid grid-cols-1 lg:grid-cols-3 items-start gap-4 md:gap-6 mb-4 md:mb-6 mt-6 md:mt-10"><div class="lg:col-span-2 order-2 lg:order-0"><!></div> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6"><!> <!></div>',1),os=R('<div><!> <main class="container mx-auto px-4 py-8 flex-grow"><h1 class="text-3xl sm:text-4xl md:text-6xl lg:text-8xl font-bold uppercase font-serif tracking-widest text-center whitespace-nowrap">F<span class="inline-block -skew-10">r</span>akturuj</h1> <!></main> <footer class="container mx-auto px-4 py-4 text-center text-zinc-600">by <a href="http://rickode.cz" target="_blank" rel="noopener" class="hover:text-zinc-400 transition-colors">Rickode</a></footer></div>');function ls(t,e){Dt(e,!1);const[r,a]=se(),n=()=>Lt(He,"$isProfileModalOpen",r),i=()=>Lt(qt,"$apiData",r);Dn(()=>{Ga().then(u=>{qt.set(u),u.profile&&kt.set(u.profile),Wa()})}),Mt();var c=os(),v=o(c);as(v,{});var _=l(v,2),d=l(o(_),2);{var g=u=>{var x=is();M(u,x)},h=u=>{var x=ss(),y=jt(x),I=o(y),D=o(I);li(D,{get data(){return i()}});var f=l(I,2);ts(f,{});var E=l(y,2),P=o(E);Mi(P,{get data(){return i()}});var C=l(P,2);Ui(C,{get data(){return i()}}),M(u,x)};tt(d,u=>{i()?u(h,!1):u(g)})}nt(()=>kn(c,`bg-zinc-900 min-h-screen text-white flex flex-col ${(n()?"overflow-hidden h-screen":"")??""}`)),M(t,c),Et(),a()}Ma(ls,{target:document.getElementById("app")});
