var Qr=Array.isArray,Yn=Array.prototype.indexOf,Er=Array.from,tn=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,en=Object.getOwnPropertyDescriptors,rn=Object.getPrototypeOf;const we=()=>{};function Jn(t){return t()}function hr(t){for(var e=0;e<t.length;e++)t[e]()}const Vt=2,nn=4,Pe=8,Mr=16,te=32,ze=64,Je=128,Xt=256,Ke=512,St=1024,de=2048,me=4096,ne=8192,or=16384,Kn=32768,Tr=65536,an=1<<17,Wn=1<<19,on=1<<20,Le=Symbol("$state"),Gn=Symbol("legacy props"),Xn=Symbol("");function sn(t){return t===this.v}function ln(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function cn(t){return!ln(t,this.v)}function Qn(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ta(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ea(t){throw new Error("https://svelte.dev/e/effect_orphan")}function ra(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function na(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function aa(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function ia(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ce=!1;function oa(){Ce=!0}const Nr=1,Or=2,un=4,sa=8,la=16,ca=1,ua=2,vn=1,va=2,da=Symbol();function fa(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let lt=null;function Zr(t){lt=t}function $t(t,e=!1,r){lt={p:lt,c:null,e:null,m:!1,s:t,x:null,l:null},Ce&&!e&&(lt.l={s:null,u:null,r1:[],r2:We(!1)})}function Lt(t){const e=lt;if(e!==null){const c=e.e;if(c!==null){var r=et,i=it;e.e=null;try{for(var n=0;n<c.length;n++){var o=c[n];Qt(o.effect),ve(o.reaction),ur(o.fn)}}finally{Qt(r),ve(i)}}lt=e.p,e.m=!0}return{}}function qe(){return!Ce||lt!==null&&lt.l===null}function We(t,e){var r={f:0,v:t,reactions:null,equals:sn,rv:0,wv:0};return r}function Ir(t,e=!1){var i;const r=We(t);return e||(r.equals=cn),Ce&&lt!==null&&lt.l!==null&&((i=lt.l).s??(i.s=[])).push(r),r}function I(t,e=!1){return pa(Ir(t,e))}function pa(t){return it!==null&&!ae&&it.f&Vt&&(Gt===null?Ca([t]):Gt.push(t)),t}function bt(t,e){return b(t,tt(()=>a(t))),e}function b(t,e){return it!==null&&!ae&&qe()&&it.f&(Vt|Mr)&&(Gt===null||!Gt.includes(t))&&ia(),je(t,e)}function je(t,e){return t.equals(e)||(t.v,t.v=e,t.wv=Sn(),dn(t,de),qe()&&et!==null&&et.f&St&&!(et.f&(te|ze))&&(ee===null?Da([t]):ee.push(t))),e}function dn(t,e){var r=t.reactions;if(r!==null)for(var i=qe(),n=r.length,o=0;o<n;o++){var c=r[o],v=c.f;v&de||!i&&c===et||(Yt(c,e),v&(St|Xt)&&(v&Vt?dn(c,me):pr(c)))}}let fn=!1;function Br(t){return t!==null&&typeof t=="object"&&Le in t?t[Le]:t}function _a(t,e){return Object.is(Br(t),Br(e))}var Rr,pn,_n;function ba(){if(Rr===void 0){Rr=window;var t=Element.prototype,e=Node.prototype;pn=xr(e,"firstChild").get,_n=xr(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function sr(t=""){return document.createTextNode(t)}function re(t){return pn.call(t)}function lr(t){return _n.call(t)}function s(t,e){return re(t)}function qt(t,e){{var r=re(t);return r instanceof Comment&&r.data===""?lr(r):r}}function l(t,e=1,r=!1){let i=t;for(;e--;)i=lr(i);return i}function ga(t){t.textContent=""}function cr(t){var e=Vt|de,r=it!==null&&it.f&Vt?it:null;return et===null||r!==null&&r.f&Xt?e|=Xt:et.f|=on,{ctx:lt,deps:null,effects:null,equals:sn,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??et}}function Rt(t){const e=cr(t);return e.equals=cn,e}function bn(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)ue(e[r])}}function ma(t){for(var e=t.parent;e!==null;){if(!(e.f&Vt))return e;e=e.parent}return null}function xa(t){var e,r=et;Qt(ma(t));try{bn(t),e=Mn(t)}finally{Qt(r)}return e}function gn(t){var e=xa(t),r=(ge||t.f&Xt)&&t.deps!==null?me:St;Yt(t,r),t.equals(e)||(t.v=e,t.wv=Sn())}function mn(t){et===null&&it===null&&ea(),it!==null&&it.f&Xt&&et===null&&ta(),jr&&Qn()}function ha(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function De(t,e,r,i=!0){var n=(t&ze)!==0,o=et,c={ctx:lt,deps:null,nodes_start:null,nodes_end:null,f:t|de,first:null,fn:e,last:null,next:null,parent:n?null:o,prev:null,teardown:null,transitions:null,wv:0};if(r){var v=ye;try{Vr(!0),fr(c),c.f|=Kn}catch(x){throw ue(c),x}finally{Vr(v)}}else e!==null&&pr(c);var _=r&&c.deps===null&&c.first===null&&c.nodes_start===null&&c.teardown===null&&(c.f&(on|Je))===0;if(!_&&!n&&i&&(o!==null&&ha(c,o),it!==null&&it.f&Vt)){var f=it;(f.effects??(f.effects=[])).push(c)}return c}function xn(t){const e=De(Pe,null,!1);return Yt(e,St),e.teardown=t,e}function wr(t){mn();var e=et!==null&&(et.f&te)!==0&&lt!==null&&!lt.m;if(e){var r=lt;(r.e??(r.e=[])).push({fn:t,effect:et,reaction:it})}else{var i=ur(t);return i}}function wa(t){return mn(),vr(t)}function ya(t){const e=De(ze,t,!0);return(r={})=>new Promise(i=>{r.outro?Ge(e,()=>{ue(e),i(void 0)}):(ue(e),i(void 0))})}function ur(t){return De(nn,t,!1)}function U(t,e){var r=lt,i={effect:null,ran:!1};r.l.r1.push(i),i.effect=vr(()=>{t(),!i.ran&&(i.ran=!0,b(r.l.r2,!0),tt(e))})}function fe(){var t=lt;vr(()=>{if(a(t.l.r2)){for(var e of t.l.r1){var r=e.effect;r.f&St&&Yt(r,me),Se(r)&&fr(r),e.ran=!1}t.l.r2.v=!1}})}function vr(t){return De(Pe,t,!0)}function H(t,e=[],r=cr){const i=e.map(r);return $r(()=>t(...i.map(a)))}function $r(t,e=0){return De(Pe|Mr|e,t,!0)}function Ae(t,e=!0){return De(Pe|te,t,!0,e)}function hn(t){var e=t.teardown;if(e!==null){const r=jr,i=it;Ur(!0),ve(null);try{e.call(null)}finally{Ur(r),ve(i)}}}function wn(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var i=r.next;ue(r,e),r=i}}function ka(t){for(var e=t.first;e!==null;){var r=e.next;e.f&te||ue(e),e=r}}function ue(t,e=!0){var r=!1;if((e||t.f&Wn)&&t.nodes_start!==null){for(var i=t.nodes_start,n=t.nodes_end;i!==null;){var o=i===n?null:lr(i);i.remove(),i=o}r=!0}wn(t,e&&!r),rr(t,0),Yt(t,or);var c=t.transitions;if(c!==null)for(const _ of c)_.stop();hn(t);var v=t.parent;v!==null&&v.first!==null&&yn(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function yn(t){var e=t.parent,r=t.prev,i=t.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=r))}function Ge(t,e){var r=[];Lr(t,r,!0),kn(r,()=>{ue(t),e&&e()})}function kn(t,e){var r=t.length;if(r>0){var i=()=>--r||e();for(var n of t)n.out(i)}else e()}function Lr(t,e,r){if(!(t.f&ne)){if(t.f^=ne,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var i=t.first;i!==null;){var n=i.next,o=(i.f&Tr)!==0||(i.f&te)!==0;Lr(i,e,o?r:!1),i=n}}}function Xe(t){zn(t,!0)}function zn(t,e){if(t.f&ne){t.f^=ne,t.f&St||(t.f^=St),Se(t)&&(Yt(t,de),pr(t));for(var r=t.first;r!==null;){var i=r.next,n=(r.f&Tr)!==0||(r.f&te)!==0;zn(r,n?e:!1),r=i}if(t.transitions!==null)for(const o of t.transitions)(o.is_global||e)&&o.in()}}let yr=!1,kr=[];function za(){yr=!1;const t=kr.slice();kr=[],hr(t)}function Cn(t){yr||(yr=!0,queueMicrotask(za)),kr.push(t)}let He=!1,Qe=!1,tr=null,ye=!1,jr=!1;function Vr(t){ye=t}function Ur(t){jr=t}let zr=[],Ie=0;let it=null,ae=!1;function ve(t){it=t}let et=null;function Qt(t){et=t}let Gt=null;function Ca(t){Gt=t}let It=null,Pt=0,ee=null;function Da(t){ee=t}let Dn=1,er=0,ge=!1,be=null;function Sn(){return++Dn}function Se(t){var f;var e=t.f;if(e&de)return!0;if(e&me){var r=t.deps,i=(e&Xt)!==0;if(r!==null){var n,o,c=(e&Ke)!==0,v=i&&et!==null&&!ge,_=r.length;if(c||v){for(n=0;n<_;n++)o=r[n],(c||!((f=o==null?void 0:o.reactions)!=null&&f.includes(t)))&&(o.reactions??(o.reactions=[])).push(t);c&&(t.f^=Ke)}for(n=0;n<_;n++)if(o=r[n],Se(o)&&gn(o),o.wv>t.wv)return!0}(!i||et!==null&&!ge)&&Yt(t,St)}return!1}function Sa(t,e){for(var r=e;r!==null;){if(r.f&Je)try{r.fn(t);return}catch{r.f^=Je}r=r.parent}throw He=!1,t}function Ea(t){return(t.f&or)===0&&(t.parent===null||(t.parent.f&Je)===0)}function dr(t,e,r,i){if(He){if(r===null&&(He=!1),Ea(e))throw t;return}r!==null&&(He=!0);{Sa(t,e);return}}function En(t,e,r=0){var i=t.reactions;if(i!==null)for(var n=0;n<i.length;n++){var o=i[n];o.f&Vt?En(o,e,r+1):e===o&&(r===0?Yt(o,de):o.f&St&&Yt(o,me),pr(o))}}function Mn(t){var m;var e=It,r=Pt,i=ee,n=it,o=ge,c=Gt,v=lt,_=ae,f=t.f;It=null,Pt=0,ee=null,it=f&(te|ze)?null:t,ge=(f&Xt)!==0&&(!ye||(n===null||_)&&t.parent!==null),Gt=null,Zr(t.ctx),ae=!1,er++;try{var x=(0,t.fn)(),h=t.deps;if(It!==null){var u;if(rr(t,Pt),h!==null&&Pt>0)for(h.length=Pt+It.length,u=0;u<It.length;u++)h[Pt+u]=It[u];else t.deps=h=It;if(!ge)for(u=Pt;u<h.length;u++)((m=h[u]).reactions??(m.reactions=[])).push(t)}else h!==null&&Pt<h.length&&(rr(t,Pt),h.length=Pt);if(qe()&&ee!==null&&!(t.f&(Vt|me|de)))for(u=0;u<ee.length;u++)En(ee[u],t);return n!==null&&er++,x}finally{It=e,Pt=r,ee=i,it=n,ge=o,Gt=c,Zr(v),ae=_}}function Ma(t,e){let r=e.reactions;if(r!==null){var i=Yn.call(r,t);if(i!==-1){var n=r.length-1;n===0?r=e.reactions=null:(r[i]=r[n],r.pop())}}r===null&&e.f&Vt&&(It===null||!It.includes(e))&&(Yt(e,me),e.f&(Xt|Ke)||(e.f^=Ke),bn(e),rr(e,0))}function rr(t,e){var r=t.deps;if(r!==null)for(var i=e;i<r.length;i++)Ma(t,r[i])}function fr(t){var e=t.f;if(!(e&or)){Yt(t,St);var r=et,i=lt;et=t;try{e&Mr?ka(t):wn(t),hn(t);var n=Mn(t);t.teardown=typeof n=="function"?n:null,t.wv=Dn;var o=t.deps,c}catch(v){dr(v,t,r,i||t.ctx)}finally{et=r}}}function Ta(){if(Ie>1e3){Ie=0;try{ra()}catch(t){if(tr!==null)dr(t,tr,null);else throw t}}Ie++}function Na(t){var e=t.length;if(e!==0){Ta();var r=ye;ye=!0;try{for(var i=0;i<e;i++){var n=t[i];n.f&St||(n.f^=St);var o=[];Tn(n,o),Oa(o)}}finally{ye=r}}}function Oa(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var i=t[r];if(!(i.f&(or|ne)))try{Se(i)&&(fr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?yn(i):i.fn=null))}catch(n){dr(n,i,null,i.ctx)}}}function Ia(){if(Qe=!1,Ie>1001)return;const t=zr;zr=[],Na(t),Qe||(Ie=0,tr=null)}function pr(t){Qe||(Qe=!0,queueMicrotask(Ia)),tr=t;for(var e=t;e.parent!==null;){e=e.parent;var r=e.f;if(r&(ze|te)){if(!(r&St))return;e.f^=St}}zr.push(e)}function Tn(t,e){var r=t.first,i=[];t:for(;r!==null;){var n=r.f,o=(n&te)!==0,c=o&&(n&St)!==0,v=r.next;if(!c&&!(n&ne))if(n&Pe){if(o)r.f^=St;else{var _=it;try{it=r,Se(r)&&fr(r)}catch(u){dr(u,r,null,r.ctx)}finally{it=_}}var f=r.first;if(f!==null){r=f;continue}}else n&nn&&i.push(r);if(v===null){let u=r.parent;for(;u!==null;){if(t===u)break t;var x=u.next;if(x!==null){r=x;continue t}u=u.parent}}r=v}for(var h=0;h<i.length;h++)f=i[h],e.push(f),Tn(f,e)}function a(t){var e=t.f,r=(e&Vt)!==0;if(be!==null&&be.add(t),it!==null&&!ae){Gt!==null&&Gt.includes(t)&&aa();var i=it.deps;t.rv<er&&(t.rv=er,It===null&&i!==null&&i[Pt]===t?Pt++:It===null?It=[t]:It.push(t))}else if(r&&t.deps===null&&t.effects===null){var n=t,o=n.parent;o!==null&&!(o.f&Xt)&&(n.f^=Xt)}return r&&(n=t,Se(n)&&gn(n)),t.v}function $a(t){var e=be;be=new Set;var r=be,i;try{if(tt(t),e!==null)for(i of be)e.add(i)}finally{be=e}return r}function Ut(t){var e=$a(()=>tt(t));for(var r of e)if(r.f&an)for(const i of r.deps||[])i.f&Vt||je(i,i.v);else je(r,r.v)}function tt(t){var e=ae;try{return ae=!0,t()}finally{ae=e}}const La=-7169;function Yt(t,e){t.f=t.f&La|e}function ie(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Le in t)Cr(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Le in r&&Cr(r)}}}function Cr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{Cr(t[i],e)}catch{}const r=rn(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=en(r);for(let n in i){const o=i[n].get;if(o)try{o.call(t)}catch{}}}}}const ja=["touchstart","touchmove"];function Aa(t){return ja.includes(t)}let Hr=!1;function Pa(){Hr||(Hr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Nn(t){var e=it,r=et;ve(null),Qt(null);try{return t()}finally{ve(e),Qt(r)}}function On(t,e,r,i=r){t.addEventListener(e,()=>Nn(r));const n=t.__on_r;n?t.__on_r=()=>{n(),i(!0)}:t.__on_r=()=>i(!0),Pa()}const qa=new Set,Yr=new Set;function Fa(t,e,r,i={}){function n(o){if(i.capture||Ne.call(e,o),!o.cancelBubble)return Nn(()=>r==null?void 0:r.call(this,o))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Cn(()=>{e.addEventListener(t,n,i)}):e.addEventListener(t,n,i),n}function F(t,e,r,i,n){var o={capture:i,passive:n},c=Fa(t,e,r,o);(e===document.body||e===window||e===document)&&xn(()=>{e.removeEventListener(t,c,o)})}function Ne(t){var E;var e=this,r=e.ownerDocument,i=t.type,n=((E=t.composedPath)==null?void 0:E.call(t))||[],o=n[0]||t.target,c=0,v=t.__root;if(v){var _=n.indexOf(v);if(_!==-1&&(e===document||e===window)){t.__root=e;return}var f=n.indexOf(e);if(f===-1)return;_<=f&&(c=_)}if(o=n[c]||t.target,o!==e){tn(t,"currentTarget",{configurable:!0,get(){return o||r}});var x=it,h=et;ve(null),Qt(null);try{for(var u,m=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var O=o["__"+i];if(O!==void 0&&!o.disabled)if(Qr(O)){var[T,...d]=O;T.apply(o,[t,...d])}else O.call(o,t)}catch(q){u?m.push(q):u=q}if(t.cancelBubble||y===e||y===null)break;o=y}if(u){for(let q of m)queueMicrotask(()=>{throw q});throw u}}finally{t.__root=e,delete t.currentTarget,ve(x),Qt(h)}}}function In(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function ke(t,e){var r=et;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function B(t,e){var r=(e&vn)!==0,i=(e&va)!==0,n,o=!t.startsWith("<!>");return()=>{n===void 0&&(n=In(o?t:"<!>"+t),r||(n=re(n)));var c=i?document.importNode(n,!0):n.cloneNode(!0);if(r){var v=re(c),_=c.lastChild;ke(v,_)}else ke(c,c);return c}}function oe(t,e,r="svg"){var i=!t.startsWith("<!>"),n=(e&vn)!==0,o=`<${r}>${i?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var v=In(o),_=re(v);if(n)for(c=document.createDocumentFragment();re(_);)c.appendChild(re(_));else c=re(_)}var f=c.cloneNode(!0);if(n){var x=re(f),h=f.lastChild;ke(x,h)}else ke(f,f);return f}}function Fe(t=""){{var e=sr(t+"");return ke(e,e),e}}function $n(){var t=document.createDocumentFragment(),e=document.createComment(""),r=sr();return t.append(e,r),ke(e,r),t}function N(t,e){t!==null&&t.before(e)}function L(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Za(t,e){return Ba(t,e)}const xe=new Map;function Ba(t,{target:e,anchor:r,props:i={},events:n,context:o,intro:c=!0}){ba();var v=new Set,_=h=>{for(var u=0;u<h.length;u++){var m=h[u];if(!v.has(m)){v.add(m);var y=Aa(m);e.addEventListener(m,Ne,{passive:y});var O=xe.get(m);O===void 0?(document.addEventListener(m,Ne,{passive:y}),xe.set(m,1)):xe.set(m,O+1)}}};_(Er(qa)),Yr.add(_);var f=void 0,x=ya(()=>{var h=r??e.appendChild(sr());return Ae(()=>{if(o){$t({});var u=lt;u.c=o}n&&(i.$$events=n),f=t(h,i)||{},o&&Lt()}),()=>{var y;for(var u of v){e.removeEventListener(u,Ne);var m=xe.get(u);--m===0?(document.removeEventListener(u,Ne),xe.delete(u)):xe.set(u,m)}Yr.delete(_),h!==r&&((y=h.parentNode)==null||y.removeChild(h))}});return Ra.set(f,x),f}let Ra=new WeakMap;function X(t,e,r=!1){var i=t,n=null,o=null,c=da,v=r?Tr:0,_=!1;const f=(h,u=!0)=>{_=!0,x(u,h)},x=(h,u)=>{c!==(c=h)&&(c?(n?Xe(n):u&&(n=Ae(()=>u(i))),o&&Ge(o,()=>{o=null})):(o?Xe(o):u&&(o=Ae(()=>u(i))),n&&Ge(n,()=>{n=null})))};$r(()=>{_=!1,e(f),_||x(null,null)},v)}function le(t,e){return e}function Va(t,e,r,i){for(var n=[],o=e.length,c=0;c<o;c++)Lr(e[c].e,n,!0);var v=o>0&&n.length===0&&r!==null;if(v){var _=r.parentNode;ga(_),_.append(r),i.clear(),se(t,e[0].prev,e[o-1].next)}kn(n,()=>{for(var f=0;f<o;f++){var x=e[f];v||(i.delete(x.k),se(t,x.prev,x.next)),ue(x.e,!v)}})}function ce(t,e,r,i,n,o=null){var c=t,v={items:new Map,first:null},_=(e&un)!==0;if(_){var f=t;c=f.appendChild(sr())}var x=null,h=!1,u=Rt(()=>{var m=r();return Qr(m)?m:m==null?[]:Er(m)});$r(()=>{var m=a(u),y=m.length;h&&y===0||(h=y===0,Ua(m,v,c,n,e,i,r),o!==null&&(y===0?x?Xe(x):x=Ae(()=>o(c)):x!==null&&Ge(x,()=>{x=null})),a(u))})}function Ua(t,e,r,i,n,o,c){var G,_t,ct,dt;var v=(n&sa)!==0,_=(n&(Nr|Or))!==0,f=t.length,x=e.items,h=e.first,u=h,m,y=null,O,T=[],d=[],E,q,S,j;if(v)for(j=0;j<f;j+=1)E=t[j],q=o(E,j),S=x.get(q),S!==void 0&&((G=S.a)==null||G.measure(),(O??(O=new Set)).add(S));for(j=0;j<f;j+=1){if(E=t[j],q=o(E,j),S=x.get(q),S===void 0){var z=u?u.e.nodes_start:r;y=Ya(z,e,y,y===null?e.first:y.next,E,q,j,i,n,c),x.set(q,y),T=[],d=[],u=y.next;continue}if(_&&Ha(S,E,j,n),S.e.f&ne&&(Xe(S.e),v&&((_t=S.a)==null||_t.unfix(),(O??(O=new Set)).delete(S))),S!==u){if(m!==void 0&&m.has(S)){if(T.length<d.length){var k=d[0],R;y=k.prev;var rt=T[0],A=T[T.length-1];for(R=0;R<T.length;R+=1)Jr(T[R],k,r);for(R=0;R<d.length;R+=1)m.delete(d[R]);se(e,rt.prev,A.next),se(e,y,rt),se(e,A,k),u=k,y=A,j-=1,T=[],d=[]}else m.delete(S),Jr(S,u,r),se(e,S.prev,S.next),se(e,S,y===null?e.first:y.next),se(e,y,S),y=S;continue}for(T=[],d=[];u!==null&&u.k!==q;)u.e.f&ne||(m??(m=new Set)).add(u),d.push(u),u=u.next;if(u===null)continue;S=u}T.push(S),y=S,u=S.next}if(u!==null||m!==void 0){for(var W=m===void 0?[]:Er(m);u!==null;)u.e.f&ne||W.push(u),u=u.next;var J=W.length;if(J>0){var vt=n&un&&f===0?r:null;if(v){for(j=0;j<J;j+=1)(ct=W[j].a)==null||ct.measure();for(j=0;j<J;j+=1)(dt=W[j].a)==null||dt.fix()}Va(e,W,vt,x)}}v&&Cn(()=>{var st;if(O!==void 0)for(S of O)(st=S.a)==null||st.apply()}),et.first=e.first&&e.first.e,et.last=y&&y.e}function Ha(t,e,r,i){i&Nr&&je(t.v,e),i&Or?je(t.i,r):t.i=r}function Ya(t,e,r,i,n,o,c,v,_,f){var x=(_&Nr)!==0,h=(_&la)===0,u=x?h?Ir(n):We(n):n,m=_&Or?We(c):c,y={i:m,v:u,k:o,a:null,e:null,prev:r,next:i};try{return y.e=Ae(()=>v(t,u,m,f),fn),y.e.prev=r&&r.e,y.e.next=i&&i.e,r===null?e.first=y:(r.next=y,r.e.next=y.e),i!==null&&(i.prev=y,i.e.prev=y.e),y}finally{}}function Jr(t,e,r){for(var i=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,o=t.e.nodes_start;o!==i;){var c=lr(o);n.before(o),o=c}}function se(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Dr(t,e,r,i){var n=t.__attributes??(t.__attributes={});n[e]!==(n[e]=r)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Xn]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Ja(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var Kr=new Map;function Ja(t){var e=Kr.get(t.nodeName);if(e)return e;Kr.set(t.nodeName,e=[]);for(var r,i=t,n=Element.prototype;n!==i;){r=en(i);for(var o in r)r[o].set&&e.push(o);i=rn(i)}return e}function nr(t,e,r){var i=t.__className,n=Ka(e);(i!==n||fn)&&(e==null?t.removeAttribute("class"):t.className=n,t.__className=n)}function Ka(t,e){return(t??"")+""}function Wr(t,e,r){if(r){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function at(t,e,r=e){var i=qe();On(t,"input",n=>{var o=n?t.defaultValue:t.value;if(o=gr(t)?mr(o):o,r(o),i&&o!==(o=e())){var c=t.selectionStart,v=t.selectionEnd;t.value=o??"",v!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(v,t.value.length))}}),tt(e)==null&&t.value&&r(gr(t)?mr(t.value):t.value),vr(()=>{var n=e();gr(t)&&n===mr(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function gr(t){var e=t.type;return e==="number"||e==="range"}function mr(t){return t===""?null:+t}function Ln(t,e,r){if(t.multiple)return Ga(t,e);for(var i of t.options){var n=$e(i);if(_a(n,e)){i.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Wa(t,e){ur(()=>{var r=new MutationObserver(()=>{var i=t.__value;Ln(t,i)});return r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Ye(t,e,r=e){var i=!0;On(t,"change",n=>{var o=n?"[selected]":":checked",c;if(t.multiple)c=[].map.call(t.querySelectorAll(o),$e);else{var v=t.querySelector(o)??t.querySelector("option:not([disabled])");c=v&&$e(v)}r(c)}),ur(()=>{var n=e();if(Ln(t,n,i),i&&n===void 0){var o=t.querySelector(":checked");o!==null&&(n=$e(o),r(n))}t.__value=n,i=!1}),Wa(t)}function Ga(t,e){for(var r of t.options)r.selected=~e.indexOf($e(r))}function $e(t){return"__value"in t?t.__value:t.value}function Ar(t){return function(...e){var r=e[0];return r.preventDefault(),t==null?void 0:t.apply(this,e)}}function Ft(t=!1){const e=lt,r=e.l.u;if(!r)return;let i=()=>ie(e.s);if(t){let n=0,o={};const c=cr(()=>{let v=!1;const _=e.s;for(const f in _)_[f]!==o[f]&&(o[f]=_[f],v=!0);return v&&n++,n});i=()=>a(c)}r.b.length&&wa(()=>{Gr(e,i),hr(r.b)}),wr(()=>{const n=tt(()=>r.m.map(Jn));return()=>{for(const o of n)typeof o=="function"&&o()}}),r.a.length&&wr(()=>{Gr(e,i),hr(r.a)})}function Gr(t,e){if(t.l.s)for(const r of t.l.s)a(r);e()}function jn(t,e,r){if(t==null)return e(void 0),we;const i=tt(()=>t.subscribe(e,r));return i.unsubscribe?()=>i.unsubscribe():i}const he=[];function Ze(t,e=we){let r=null;const i=new Set;function n(v){if(ln(t,v)&&(t=v,r)){const _=!he.length;for(const f of i)f[1](),he.push(f,t);if(_){for(let f=0;f<he.length;f+=2)he[f][0](he[f+1]);he.length=0}}}function o(v){n(v(t))}function c(v,_=we){const f=[v,_];return i.add(f),i.size===1&&(r=e(n,o)||we),v(t),()=>{i.delete(f),i.size===0&&r&&(r(),r=null)}}return{set:n,update:o,subscribe:c}}function Xa(t){let e;return jn(t,r=>e=r)(),e}let Ue=!1,Sr=Symbol();function Ht(t,e,r){const i=r[e]??(r[e]={store:null,source:Ir(void 0),unsubscribe:we});if(i.store!==t&&!(Sr in r))if(i.unsubscribe(),i.store=t??null,t==null)i.source.v=void 0,i.unsubscribe=we;else{var n=!0;i.unsubscribe=jn(t,o=>{n?i.source.v=o:b(i.source,o)}),n=!1}return t&&Sr in r?Xa(t):a(i.source)}function pe(){const t={};function e(){xn(()=>{for(var r in t)t[r].unsubscribe();tn(t,Sr,{enumerable:!1,value:!0})})}return[t,e]}function Wt(t,e,r){return t.set(r),e}function Qa(t){var e=Ue;try{return Ue=!1,[t(),Ue]}finally{Ue=e}}function ti(t){for(var e=et,r=et;e!==null&&!(e.f&(te|ze));)e=e.parent;try{return Qt(e),t()}finally{Qt(r)}}function ot(t,e,r,i){var O;var n=(r&ca)!==0,o=!Ce||(r&ua)!==0,c=!1,v;[v,c]=Qa(()=>t[e]);var _=Le in t||Gn in t,f=(((O=xr(t,e))==null?void 0:O.set)??(_&&e in t&&(T=>t[e]=T)))||void 0,x=i,h=!0,u=()=>(h&&(h=!1,x=i),x);v===void 0&&i!==void 0&&(f&&o&&na(),v=u(),f&&f(v));var m;if(o)m=()=>{var T=t[e];return T===void 0?u():(h=!0,T)};else{var y=ti(()=>(n?cr:Rt)(()=>t[e]));y.f|=an,m=()=>{var T=a(y);return T!==void 0&&(x=void 0),T===void 0?x:T}}return m}function An(t){lt===null&&fa(),Ce&&lt.l!==null?ei(lt).m.push(t):wr(()=>{const e=tt(t);if(typeof e=="function")return e})}function ei(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const ri="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ri);oa();const Jt=Ze(null),Oe=Ze(new Date().getFullYear()),Ot=Ze({title:"",ico:"",dic:"",street:"",city:"",psc:"",country:"Česká republika",email:"",phone:"",bank_account:"",bank_code:"",invoice_text:"Fyzická osoba zapsaná v živnostenském rejstříku."}),ar=Ze(!1),Mt=Ze(null),ni=window.location.origin+"/wp-json";var Xr;let Pn=(Xr=window.wpSettings)==null?void 0:Xr.nonce,ir;async function ai(){try{const t=await Kt("/rk/refresh-nonce",{method:"GET",headers:{"Content-Type":"application/json"}});t.nonce&&(Pn=t.nonce)}catch(t){console.error("Failed to refresh nonce:",t)}}function ii(){ir||(ir=setInterval(ai,10*60*1e3))}async function Kt(t,e={}){var n;const r={Accept:"application/json","X-WP-Nonce":Pn},i=await fetch(`${ni}${t}`,{...e,credentials:"include",headers:{...r,...e.headers}});if(!((n=e.headers)!=null&&n.Accept)||e.headers.Accept==="application/json"){const o=await i.json();if(!i.ok)throw new Error(o.message||"API call failed");return o}if(!i.ok)throw new Error("API call failed");return i}async function oi(){return Kt("/rk/data")}async function si(t){return Kt("/rk/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function li(t){return Kt("/rk/customer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function ci(t,e){return Kt(`/rk/customer/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function ui(t){return Kt(`/rk/customer/${t}`,{method:"DELETE"})}async function vi(t){return Kt(`/rk/invoice/${t}/toggle-paid`,{method:"POST"})}async function di(t){return Kt("/rk/invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function fi(t,e){return Kt(`/rk/invoice/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function pi(t){return Kt(`/rk/invoice/${t}`,{method:"DELETE"})}async function _i(t){var c;const e=await Kt(`/rk/invoice/${t}/pdf`,{method:"GET",headers:{Accept:"application/pdf"}}),r=((c=e.headers.get("Content-Disposition"))==null?void 0:c.split("filename=")[1])||`invoice-${t}.pdf`,i=await e.blob(),n=window.URL.createObjectURL(i),o=document.createElement("a");o.href=n,o.download=r,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}window.addEventListener("unload",()=>{ir&&clearInterval(ir)});var bi=B('<div class="bg-zinc-800 p-4 sm:p-6 rounded-lg"><h2 class="text-xl sm:text-2xl mb-4">Přehled</h2> <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6"><div><p class="text-zinc-400">Vystavené faktury</p> <p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Splatné tento týden</p> <p class="text-2xl sm:text-3xl font-bold text-green-500"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Po splatnosti</p> <p class="text-2xl sm:text-3xl font-bold text-red-500"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Zaplaceno tento měsíc</p> <p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Zaplaceno minulý měsíc</p> <p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-500"> </p></div> <div><p class="text-zinc-400">Zaplaceno tento rok</p> <p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-500"> </p></div></div></div>');function gi(t,e){$t(e,!1);const r=I(),i=I(),n=I(),o=I(),c=I(),v=I(),_=I(),f=I(),x=I(),h=I(),u=I(),m=I(),y=I();let O=ot(e,"data",8);const T=new Date,d=T.getFullYear(),E=T.getMonth(),q=E-1,S=7,j=new Date(T.getTime()+S*24*60*60*1e3);U(()=>ie(O()),()=>{var w;b(r,((w=O())==null?void 0:w.invoices)||[])}),U(()=>a(r),()=>{b(i,a(r).filter(w=>!w.acf.paid).reduce((w,nt)=>{var Y;const ut=((Y=JSON.parse(nt.acf.items))==null?void 0:Y.items)||[];return w+ut.reduce((Q,p)=>Q+(p.price_per_unit||0)*(p.quantity||0),0)},0))}),U(()=>a(r),()=>{b(n,a(r).filter(w=>!w.acf.paid&&new Date(w.acf.maturity)<T).reduce((w,nt)=>{var Y;const ut=((Y=JSON.parse(nt.acf.items))==null?void 0:Y.items)||[];return w+ut.reduce((Q,p)=>Q+(p.price_per_unit||0)*(p.quantity||0),0)},0))}),U(()=>a(r),()=>{b(o,a(r).filter(w=>w.acf.paid&&new Date(w.created_date).getFullYear()===d).reduce((w,nt)=>{var Y;const ut=((Y=JSON.parse(nt.acf.items))==null?void 0:Y.items)||[];return w+ut.reduce((Q,p)=>Q+(p.price_per_unit||0)*(p.quantity||0),0)},0))}),U(()=>a(r),()=>{b(c,a(r).filter(w=>w.acf.paid&&new Date(w.created_date).getMonth()===E&&new Date(w.created_date).getFullYear()===d).reduce((w,nt)=>{var Y;const ut=((Y=JSON.parse(nt.acf.items))==null?void 0:Y.items)||[];return w+ut.reduce((Q,p)=>Q+(p.price_per_unit||0)*(p.quantity||0),0)},0))}),U(()=>a(r),()=>{b(v,a(r).filter(w=>w.acf.paid&&new Date(w.created_date).getMonth()===q&&new Date(w.created_date).getFullYear()===d).reduce((w,nt)=>{var Y;const ut=((Y=JSON.parse(nt.acf.items))==null?void 0:Y.items)||[];return w+ut.reduce((Q,p)=>Q+(p.price_per_unit||0)*(p.quantity||0),0)},0))}),U(()=>a(r),()=>{b(_,a(r).filter(w=>!w.acf.paid&&new Date(w.acf.maturity)>T&&new Date(w.acf.maturity)<=j).reduce((w,nt)=>{var Y;const ut=((Y=JSON.parse(nt.acf.items))==null?void 0:Y.items)||[];return w+ut.reduce((Q,p)=>Q+(p.price_per_unit||0)*(p.quantity||0),0)},0))}),U(()=>a(r),()=>{b(f,a(r).filter(w=>!w.acf.paid).length)}),U(()=>a(r),()=>{b(x,a(r).filter(w=>!w.acf.paid&&new Date(w.acf.maturity)<T).length)}),U(()=>a(r),()=>{b(h,a(r).filter(w=>w.acf.paid&&new Date(w.created_date).getFullYear()===d).length)}),U(()=>a(r),()=>{b(u,a(r).filter(w=>w.acf.paid&&new Date(w.created_date).getMonth()===E&&new Date(w.created_date).getFullYear()===d).length)}),U(()=>a(r),()=>{b(m,a(r).filter(w=>w.acf.paid&&new Date(w.created_date).getMonth()===q&&new Date(w.created_date).getFullYear()===d).length)}),U(()=>a(r),()=>{b(y,a(r).filter(w=>!w.acf.paid&&new Date(w.acf.maturity)>T&&new Date(w.acf.maturity)<=j).length)}),fe(),Ft();var z=bi(),k=l(s(z),2),R=s(k),rt=l(s(R),2),A=s(rt),W=l(rt,2),J=s(W),vt=l(R,2),G=l(s(vt),2),_t=s(G),ct=l(G,2),dt=s(ct),st=l(vt,2),ft=l(s(st),2),zt=s(ft),wt=l(ft,2),yt=s(wt),gt=l(st,2),mt=l(s(gt),2),xt=s(mt),Et=l(mt,2),jt=s(Et),ht=l(gt,2),Tt=l(s(ht),2),At=s(Tt),Ct=l(Tt,2),Zt=s(Ct),$=l(ht,2),Z=l(s($),2),Dt=s(Z),P=l(Z,2),D=s(P);H((w,nt,ut,Y,Q,p)=>{L(A,`${w??""} Kč`),L(J,`Počet: ${a(f)??""}`),L(_t,`${nt??""} Kč`),L(dt,`Počet: ${a(y)??""}`),L(zt,`${ut??""} Kč`),L(yt,`Počet: ${a(x)??""}`),L(xt,`${Y??""} Kč`),L(jt,`Počet: ${a(u)??""}`),L(At,`${Q??""} Kč`),L(Zt,`Počet: ${a(m)??""}`),L(Dt,`${p??""} Kč`),L(D,`Počet: ${a(h)??""}`)},[()=>a(i).toLocaleString("cs-CZ"),()=>a(_).toLocaleString("cs-CZ"),()=>a(n).toLocaleString("cs-CZ"),()=>a(c).toLocaleString("cs-CZ"),()=>a(v).toLocaleString("cs-CZ"),()=>a(o).toLocaleString("cs-CZ")],Rt),N(t,z),Lt()}var mi=oe('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Mažu...',1),xi=B('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/3 md:inset-y-1/3 bg-zinc-800 rounded-lg shadow-xl z-[999]"><div class="p-6 h-full flex flex-col"><div class="flex justify-between items-start"><h2 class="text-2xl">Smazat fakturu</h2> <button class="cursor-pointer text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="my-6 text-zinc-300"><p>Opravdu chcete smazat fakturu <strong> </strong>?</p> <p class="mt-2 text-red-400">Tuto akci nelze vrátit zpět!</p></div> <div class="flex gap-4 mt-auto"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-red-600 rounded hover:bg-red-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></div></div>',1);function hi(t,e){$t(e,!1);let r=ot(e,"invoice",8),i=ot(e,"onClose",8),n=I(!1);async function o(){try{b(n,!0),await pi(r().id),Jt.update(z=>({...z,invoices:z.invoices.filter(k=>k.id!==r().id)})),Mt.set({type:"success",message:"Faktura byla smazána"}),i()()}catch(z){Mt.set({type:"error",message:z.message||"Nepodařilo se smazat fakturu"})}finally{b(n,!1)}}Ft();var c=xi(),v=qt(c),_=l(v,2),f=s(_),x=s(f),h=l(s(x),2),u=l(x,2),m=s(u),y=l(s(m)),O=s(y),T=l(u,2),d=s(T),E=l(d,2),q=s(E);{var S=z=>{var k=mi();N(z,k)},j=z=>{var k=Fe("Smazat fakturu");N(z,k)};X(q,z=>{a(n)?z(S):z(j,!1)})}H(()=>{L(O,r().title),d.disabled=a(n),E.disabled=a(n)}),F("click",v,function(...z){var k;(k=i())==null||k.apply(this,z)}),F("click",h,function(...z){var k;(k=i())==null||k.apply(this,z)}),F("click",d,function(...z){var k;(k=i())==null||k.apply(this,z)}),F("click",E,o),N(t,c),Lt()}var wi=B('<span class="text-xs bg-green-900 text-green-300 px-2 py-1 rounded">Zaplaceno</span>'),yi=B('<span class="text-xs bg-red-900 text-red-300 px-2 py-1 rounded">Po splatnosti</span>'),ki=B('<span class="text-xs bg-yellow-900 text-yellow-300 px-2 py-1 rounded">Čeká na platbu</span>'),zi=oe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>'),Ci=oe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>'),Di=B('<div class="flex flex-col sm:flex-row justify-between text-xs sm:text-base gap-1"><div><span class="text-zinc-300"> </span> <span class="text-zinc-500 ml-2"> </span></div> <div class="text-zinc-300"> </div></div>'),Si=B('<div class="mt-3 sm:mt-4 border-t border-zinc-600 pt-3 sm:pt-4"><div class="space-y-2"></div></div>'),Ei=B('<div class="bg-zinc-700 p-3 sm:p-4 rounded-lg"><div class="flex flex-col sm:flex-row justify-between items-start gap-2 sm:gap-0"><div><h3 class="font-bold text-xl"> </h3> <p class="text-base text-zinc-400"> </p></div> <div class="text-left sm:text-right w-full sm:w-auto"><p class="font-bold text-xl"> </p> <p class="text-base text-zinc-400"> </p></div></div> <div class="mt-3 sm:mt-2 flex flex-wrap sm:flex-nowrap justify-between items-center gap-2"><div class="flex items-center gap-2"><!> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors"><!></button></div> <div class="flex gap-2"><button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Stáhnout PDF"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Duplikovat fakturu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Zobrazit detail"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Upravit fakturu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-red-500 hover:bg-zinc-600 rounded-lg transition-colors" title="Smazat fakturu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg></button></div></div> <!></div> <!>',1);function Mi(t,e){$t(e,!1);const[r,i]=pe(),n=()=>Ht(Jt,"$apiData",r);let o=ot(e,"invoice",8),c=ot(e,"customerName",8),v=ot(e,"onEdit",8),_=ot(e,"expanded",8,!1),f=ot(e,"onShowDetails",8),x=ot(e,"onDuplicate",8),h=I(!1),u=I([]);function m(D){var nt;return(((nt=JSON.parse(D))==null?void 0:nt.items)||[]).reduce((ut,Y)=>ut+Y.price_per_unit*Y.quantity,0)}function y(){n().profile.user_id,_i(o().id)}async function O(){try{const D=await vi(o().id);Jt.update(w=>({...w,invoices:w.invoices.map(nt=>nt.id===o().id?D.invoice:nt)})),Mt.set({type:"success",message:D.invoice.acf.paid?"Faktura byla označena jako zaplacená":"Faktura byla označena jako nezaplacená"})}catch{Mt.set({type:"error",message:"Nepodařilo se změnit stav faktury"})}}function T(){b(h,!0)}function d(){f()&&f()(o().id)}function E(){x()&&x()(o())}function q(D){return D.pricing_type==="total"?"":`${D.quantity} ${D.units} × ${D.price_per_unit.toLocaleString("cs-CZ")} Kč`}function S(D){return D.pricing_type==="total"?parseFloat(D.price_per_unit)||0:(D.quantity||0)*(D.price_per_unit||0)}U(()=>ie(o()),()=>{var D;try{b(u,((D=JSON.parse(o().acf.items))==null?void 0:D.items)||[])}catch(w){console.error("Failed to parse invoice items:",w),b(u,[])}}),fe(),Ft();var j=Ei(),z=qt(j),k=s(z),R=s(k),rt=s(R),A=s(rt),W=l(rt,2),J=s(W),vt=l(R,2),G=s(vt),_t=s(G),ct=l(G,2),dt=s(ct),st=l(k,2),ft=s(st),zt=s(ft);{var wt=D=>{var w=wi();N(D,w)},yt=D=>{var w=$n(),nt=qt(w);{var ut=Q=>{var p=yi();N(Q,p)},Y=Q=>{var p=ki();N(Q,p)};X(nt,Q=>{new Date(o().acf.maturity)<new Date?Q(ut):Q(Y,!1)},!0)}N(D,w)};X(zt,D=>{o().acf.paid?D(wt):D(yt,!1)})}var gt=l(zt,2),mt=s(gt);{var xt=D=>{var w=zi();N(D,w)},Et=D=>{var w=Ci();N(D,w)};X(mt,D=>{o().acf.paid?D(Et,!1):D(xt)})}var jt=l(ft,2),ht=s(jt),Tt=l(ht,2),At=l(Tt,2),Ct=l(At,2),Zt=l(Ct,2),$=l(st,2);{var Z=D=>{var w=Si(),nt=s(w);ce(nt,5,()=>a(u),le,(ut,Y)=>{var Q=Di(),p=s(Q),C=s(p),K=s(C),g=l(C,2),M=s(g),V=l(p,2),pt=s(V);H((kt,Bt)=>{L(K,a(Y).name),L(M,kt),L(pt,`${Bt??""} Kč`)},[()=>q(a(Y)),()=>S(a(Y)).toLocaleString("cs-CZ")],Rt),N(ut,Q)}),N(D,w)};X($,D=>{_()&&D(Z)})}var Dt=l(z,2);{var P=D=>{hi(D,{get invoice(){return o()},onClose:()=>b(h,!1)})};X(Dt,D=>{a(h)&&D(P)})}H((D,w)=>{L(A,o().title),L(J,`Pro: ${c()??""}`),L(_t,`${D??""} Kč`),L(dt,`Splatnost: ${w??""}`),Dr(gt,"title",o().acf.paid?"Označit jako nezaplacené":"Označit jako zaplacené")},[()=>m(o().acf.items).toLocaleString("cs-CZ"),()=>new Date(o().acf.maturity).toLocaleDateString("cs-CZ")],Rt),F("click",gt,O),F("click",ht,y),F("click",Tt,E),F("click",At,d),F("click",Ct,()=>v()(o())),F("click",Zt,T),N(t,j),Lt(),i()}var Ti=B("<option> </option>"),Ni=B('<div class="flex gap-2 mb-2"><button type="button" class="px-3 py-1 text-base bg-zinc-700 hover:bg-zinc-600 rounded">Dnes</button> <button type="button" class="px-3 py-1 text-base bg-zinc-700 hover:bg-zinc-600 rounded">10 dní</button> <button type="button" class="px-3 py-1 text-base bg-zinc-700 hover:bg-zinc-600 rounded">14 dní</button> <button type="button" class="px-3 py-1 text-base bg-zinc-700 hover:bg-zinc-600 rounded">Měsíc</button></div>'),Oi=B('<p class="text-red-500 text-base"> </p>'),Ii=B('<div class="col-span-1 sm:col-span-2"><label class="block text-base text-zinc-400 mb-1">Cena/j.</label> <input type="number" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" min="0" step="1" required></div> <div class="col-span-2 sm:col-span-2"><label class="block text-base text-zinc-400 mb-1">Počet</label> <input type="number" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" min="0" step="0.1" required></div> <div class="col-span-1 sm:col-span-2"><div class="flex items-end gap-2 h-full"><div class="flex-1"><label class="block text-base text-zinc-400 mb-1">Jednotka</label> <input type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <button type="button" class="cursor-pointer p-2 text-zinc-400 hover:text-red-500 hover:bg-zinc-600 rounded"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg></button></div></div>',1),$i=B('<div class="col-span-5 sm:col-span-5"><label class="block text-base text-zinc-400 mb-1">Celková cena</label> <input type="number" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" min="0" step="1" required></div> <div class="col-span-1 sm:col-span-1 flex items-end"><button type="button" class="cursor-pointer p-2 text-zinc-400 hover:text-red-500 hover:bg-zinc-600 rounded"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg></button></div>',1),Li=B('<hr class="border-zinc-700 my-4">'),ji=B('<div class="space-y-4"><div><label class="block text-base text-zinc-400 mb-1">Název položky</label> <input type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div class="flex gap-2 mb-2"><button type="button">Cena za jednotku</button> <button type="button">Cena souhrnně</button></div> <div class="grid grid-cols-2 sm:grid-cols-6 gap-4"><!></div> <p class="text-right text-base text-zinc-400"> </p> <!></div>'),Ai=oe('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Ukládám...',1),Pi=B('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/4 md:inset-y-16 bg-zinc-800 rounded-lg shadow-xl z-[999] overflow-y-auto"><div class="p-6 flex flex-col h-full"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl"> </h2> <button class="cursor-pointer text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-4 flex-1 flex flex-col"><div class="grid grid-cols-1 lg:grid-cols-2 gap-4"><div><label for="title" class="block text-base text-zinc-400 mb-1">Číslo faktury</label> <input id="title" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="created_date" class="block text-base text-zinc-400 mb-1">Datum vystavení</label> <input id="created_date" type="date" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="customer" class="block text-base text-zinc-400 mb-1">Zákazník</label> <select id="customer" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required><option>Vyberte zákazníka</option><!></select></div> <div><label for="maturity" class="block text-base text-zinc-400 mb-1">Datum splatnosti</label> <!> <input id="maturity" type="date" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div></div> <!> <div class="border border-zinc-700 rounded-lg p-4"><h3 class="text-lg mb-4">Položky faktury</h3> <div class="space-y-6"></div> <button type="button" class="cursor-pointer mt-4 w-full px-4 py-2 bg-zinc-700 rounded hover:bg-zinc-600 flex items-center justify-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg> Přidat položku</button></div> <div class="flex justify-between items-center py-4 border-t border-zinc-700"><span class="text-lg">Celková částka:</span> <span class="text-2xl font-bold"> </span></div> <div class="flex gap-4 mt-auto"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="submit" class="cursor-pointer flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></form></div></div>',1);function qi(t,e){var Q;$t(e,!1);const[r,i]=pe(),n=()=>Ht(Jt,"$apiData",r),o=I(),c=I(),v=I();ot(e,"isOpen",8);let _=ot(e,"onClose",8),f=ot(e,"editData",8,null),x=ot(e,"duplicatingInvoice",8,null),h=I(!1),u=I(null);function m(){const p=new Date;return p.setDate(p.getDate()+14),p.toISOString().split("T")[0]}function y(p){let C=new Date;return a(d).created_date&&(C=new Date(a(d).created_date)),C.setDate(C.getDate()+p),C.toISOString().split("T")[0]}function O(p){bt(d,a(d).maturity=y(p))}function T(){var K;if(!((K=n())!=null&&K.invoices))return"";const p=new Date().getFullYear(),C=n().invoices.filter(g=>new Date(g.created_date).getFullYear()===p);return`${p}${String(C.length+1).padStart(4,"0")}`}let d=I({title:"",customer:"",maturity:m(),created_date:new Date().toISOString().split("T")[0],items:[]});!f()&&((Q=n())!=null&&Q.invoices)&&b(d,{...a(d),title:T(),maturity:m(),created_date:new Date().toISOString().split("T")[0]});function E(){return{name:"",price_per_unit:"",units:"h",quantity:"1",pricing_type:"unit"}}function q(){bt(d,a(d).items=[...a(d).items,E()])}function S(p){bt(d,a(d).items=a(d).items.filter((C,K)=>K!==p))}async function j(){try{if(!a(d).customer){b(u,"Vyberte zákazníka");return}b(h,!0),b(u,null);const p={...a(d),items:JSON.stringify({items:a(d).items})},C=f()&&!x()?await fi(f().id,p):await di(p);Jt.update(K=>({...K,invoices:f()&&!x()?K.invoices.map(g=>{var M;return g.id===((M=f())==null?void 0:M.id)&&!x()?C.invoice:g}):[...K.invoices,C.invoice]})),Mt.set({type:"success",message:f()&&!x()?"Faktura byla upravena":"Faktura byla vytvořena"}),setTimeout(_(),500)}catch(p){b(u,p.message),Mt.set({type:"error",message:a(u)})}finally{b(h,!1)}}U(()=>n(),()=>{var p;b(o,((p=n())==null?void 0:p.customers)||[])}),U(()=>ie(f()),()=>{var p,C,K,g,M,V,pt,kt,Bt,Ee;if(f()){const Be=((K=JSON.parse((C=(p=f())==null?void 0:p.acf)==null?void 0:C.items))==null?void 0:K.items)||[];b(d,{title:((g=f())==null?void 0:g.title)||T(),customer:(V=(M=f())==null?void 0:M.acf)==null?void 0:V.customer,maturity:((kt=(pt=f())==null?void 0:pt.acf)==null?void 0:kt.maturity)||m(),created_date:((Ee=(Bt=f())==null?void 0:Bt.created_date)==null?void 0:Ee.split(" ")[0])||new Date().toISOString().split("T")[0],items:Be.length?Be:[E()]})}}),U(()=>a(d),()=>{a(d).items.length||bt(d,a(d).items=[E()])}),U(()=>a(d),()=>{b(c,a(d).items.map(p=>p.pricing_type==="total"?parseFloat(p.price_per_unit)||0:(p.price_per_unit||0)*(p.quantity||0)))}),U(()=>a(c),()=>{b(v,a(c).reduce((p,C)=>p+C,0))}),U(()=>a(d),()=>{bt(d,a(d).items=a(d).items.map(p=>({...p,units:p.pricing_type==="total"?"":p.units||"h"})))}),fe(),Ft();var z=Pi(),k=qt(z),R=l(k,2),rt=s(R),A=s(rt),W=s(A),J=s(W),vt=l(W,2),G=l(A,2),_t=s(G),ct=s(_t),dt=l(s(ct),2),st=l(ct,2),ft=l(s(st),2),zt=l(st,2),wt=l(s(zt),2);H(()=>{a(d),Ut(()=>{a(o)})});var yt=s(wt);yt.value=((yt.__value="")==null,"");var gt=l(yt);ce(gt,1,()=>a(o),le,(p,C)=>{var K=Ti(),g={},M=s(K);H(()=>{g!==(g=a(C).id)&&(K.value=(K.__value=a(C).id)==null?"":a(C).id),L(M,a(C).title)}),N(p,K)});var mt=l(zt,2),xt=l(s(mt),2);{var Et=p=>{var C=Ni(),K=s(C),g=l(K,2),M=l(g,2),V=l(M,2);F("click",K,()=>O(0)),F("click",g,()=>O(10)),F("click",M,()=>O(14)),F("click",V,()=>O(30)),N(p,C)};X(xt,p=>{(!f()||x())&&p(Et)})}var jt=l(xt,2),ht=l(_t,2);{var Tt=p=>{var C=Oi(),K=s(C);H(()=>L(K,a(u))),N(p,C)};X(ht,p=>{a(u)&&p(Tt)})}var At=l(ht,2),Ct=l(s(At),2);ce(Ct,5,()=>a(d).items,le,(p,C,K)=>{var g=ji(),M=s(g),V=l(s(M),2),pt=l(M,2),kt=s(pt),Bt=l(kt,2),Ee=l(pt,2),Be=s(Ee);{var Fn=Nt=>{var _e=Ii(),Me=qt(_e),_r=l(s(Me),2),Re=l(Me,2),Ve=l(s(Re),2),br=l(Re,2),Un=s(br),qr=s(Un),Hn=l(s(qr),2),Fr=l(qr,2);H(()=>Fr.disabled=a(d).items.length===1),at(_r,()=>a(C).price_per_unit,Te=>(a(C).price_per_unit=Te,Ut(()=>a(d).items))),at(Ve,()=>a(C).quantity,Te=>(a(C).quantity=Te,Ut(()=>a(d).items))),at(Hn,()=>a(C).units,Te=>(a(C).units=Te,Ut(()=>a(d).items))),F("click",Fr,()=>S(K)),N(Nt,_e)},Zn=Nt=>{var _e=$i(),Me=qt(_e),_r=l(s(Me),2),Re=l(Me,2),Ve=s(Re);H(()=>Ve.disabled=a(d).items.length===1),at(_r,()=>a(C).price_per_unit,br=>(a(C).price_per_unit=br,Ut(()=>a(d).items))),F("click",Ve,()=>S(K)),N(Nt,_e)};X(Be,Nt=>{a(C).pricing_type==="unit"?Nt(Fn):Nt(Zn,!1)})}var Pr=l(Ee,2),Bn=s(Pr),Rn=l(Pr,2);{var Vn=Nt=>{var _e=Li();N(Nt,_e)};X(Rn,Nt=>{K<a(d).items.length-1&&Nt(Vn)})}H(Nt=>{nr(kt,`px-3 py-1 text-base ${(a(C).pricing_type==="unit"?"bg-blue-600":"bg-zinc-700 hover:bg-zinc-600")??""} rounded`),nr(Bt,`px-3 py-1 text-base ${(a(C).pricing_type==="total"?"bg-blue-600":"bg-zinc-700 hover:bg-zinc-600")??""} rounded`),L(Bn,`Celkem: ${Nt??""} Kč`)},[()=>a(c)[K].toLocaleString("cs-CZ")],Rt),at(V,()=>a(C).name,Nt=>(a(C).name=Nt,Ut(()=>a(d).items))),F("click",kt,()=>(a(C).pricing_type="unit",Ut(()=>a(d).items))),F("click",Bt,()=>(a(C).pricing_type="total",Ut(()=>a(d).items))),N(p,g)});var Zt=l(Ct,2),$=l(At,2),Z=l(s($),2),Dt=s(Z),P=l($,2),D=s(P),w=l(D,2),nt=s(w);{var ut=p=>{var C=Ai();N(p,C)},Y=p=>{var C=Fe();H(()=>L(C,f()?"Uložit změny":"Vytvořit fakturu")),N(p,C)};X(nt,p=>{a(h)?p(ut):p(Y,!1)})}H(p=>{L(J,f()&&!x()?"Upravit fakturu":"Nová faktura"),L(Dt,`${p??""} Kč`),D.disabled=a(h),w.disabled=a(h)},[()=>a(v).toLocaleString("cs-CZ")],Rt),F("click",k,function(...p){var C;(C=_())==null||C.apply(this,p)}),F("click",vt,function(...p){var C;(C=_())==null||C.apply(this,p)}),at(dt,()=>a(d).title,p=>bt(d,a(d).title=p)),at(ft,()=>a(d).created_date,p=>bt(d,a(d).created_date=p)),Ye(wt,()=>a(d).customer,p=>bt(d,a(d).customer=p)),at(jt,()=>a(d).maturity,p=>bt(d,a(d).maturity=p)),F("click",Zt,q),F("click",D,function(...p){var C;(C=_())==null||C.apply(this,p)}),F("submit",G,Ar(j)),N(t,z),Lt(),i()}var Fi=B("<button> </button>"),Zi=B("<option> </option>"),Bi=B("<option> </option>"),Ri=B('<button class="px-3 py-2 bg-red-900 text-red-300 rounded flex items-center gap-2 whitespace-nowrap" title="Zrušit filtry"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg></button>'),Vi=B('<div class="bg-zinc-800 p-4 sm:p-6 rounded-lg"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0 mb-6"><div class="flex flex-col sm:flex-row items-start sm:items-center gap-4"><h2 class="text-xl sm:text-2xl">Faktury</h2> <button class="cursor-pointer px-4 py-2 bg-green-600 rounded hover:bg-green-700 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path></svg> Nová faktura</button></div> <div class="flex flex-wrap gap-2 w-full sm:w-auto"></div></div> <div class="flex flex-col sm:flex-row gap-4 mb-6"><div class="flex-1 flex flex-col sm:flex-row gap-4"><select class="bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"><option>Všichni zákazníci</option><!></select> <select class="bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"><option>Všechny měsíce</option><!></select> <select class="bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"><option>Všechny stavy</option><option>Zaplacené</option><option>Vystavené</option><option>Po splatnosti</option></select></div> <!></div> <div class="flex gap-4 mb-6"><div class="relative flex-1"><input type="text" placeholder="Hledat v položkách faktury..." class="w-full bg-zinc-700 rounded pl-10 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"></path></svg></div></div> <div class="space-y-4"></div> <div class="bg-zinc-700/50 p-4 rounded-lg mt-6"><div class="flex justify-between items-center"><p class="text-zinc-400"> </p> <div class="text-right"><p class="text-2xl sm:text-3xl font-bold"> </p> <p class="text-base text-zinc-400"> </p></div></div></div> <!></div>');function Ui(t,e){$t(e,!1);const[r,i]=pe(),n=()=>Ht(Oe,"$selectedYear",r),o=I(),c=I(),v=I(),_=I(),f=I(),x=I();let h=ot(e,"data",8),u=I(""),m=I(""),y=I(""),O=I("");function T(g){return new Date(2e3,g).toLocaleString("cs-CZ",{month:"long"})}function d(g){var M;return((M=a(c).find(V=>V.id===g))==null?void 0:M.title)||"Unknown"}let E=I(!1),q=I(null),S=I(null);function j(g){b(q,g),b(E,!0)}function z(){b(E,!1),b(q,null),b(S,null)}let k=I({});function R(g){bt(k,a(k)[g]=!a(k)[g]),b(k,a(k))}function rt(g){const M={acf:{customer:g.acf.customer,items:g.acf.items}};b(q,M),b(S,!0),b(E,!0)}function A(){b(u,""),b(m,""),b(y,""),b(O,"")}U(()=>ie(h()),()=>{var g;b(o,((g=h())==null?void 0:g.invoices)||[])}),U(()=>ie(h()),()=>{var g;b(c,((g=h())==null?void 0:g.customers)||[])}),U(()=>a(o),()=>{b(v,[...new Set(a(o).map(g=>new Date(g.created_date).getFullYear()))].sort((g,M)=>M-g))}),U(()=>(a(v),n(),Oe),()=>{a(v).length&&!a(v).includes(n())&&Oe.set(a(v)[0])}),U(()=>n(),()=>{n()&&b(m,"")}),U(()=>(a(o),n(),a(u),a(m),a(y),a(O)),()=>{b(_,a(o).filter(g=>new Date(g.created_date).getFullYear()===n()).filter(g=>!a(u)||g.acf.customer===a(u)).filter(g=>a(m)===""?!0:new Date(g.created_date).getMonth()===parseInt(a(m))).filter(g=>{if(!a(y))return!0;const M=new Date,V=new Date(g.acf.maturity);switch(a(y)){case"paid":return g.acf.paid;case"unpaid":return!g.acf.paid&&V>=M;case"overdue":return!g.acf.paid&&V<M;default:return!0}}).filter(g=>{var V;if(!a(O))return!0;const M=a(O).toLowerCase();try{return(((V=JSON.parse(g.acf.items))==null?void 0:V.items)||[]).some(kt=>kt.name.toLowerCase().includes(M)||(kt.units||"").toLowerCase().includes(M))}catch{return!1}}).sort((g,M)=>new Date(M.created_date)-new Date(g.created_date)))}),U(()=>(a(o),n()),()=>{b(f,[...new Set(a(o).filter(g=>new Date(g.created_date).getFullYear()===n()).map(g=>new Date(g.created_date).getMonth()))].sort((g,M)=>g-M))}),U(()=>a(_),()=>{b(x,{count:a(_).length,total:a(_).reduce((g,M)=>{var pt;const V=((pt=JSON.parse(M.acf.items))==null?void 0:pt.items)||[];return g+V.reduce((kt,Bt)=>kt+(Bt.price_per_unit||0)*(Bt.quantity||0),0)},0)})}),fe(),Ft();var W=Vi(),J=s(W),vt=s(J),G=l(s(vt),2),_t=l(vt,2);ce(_t,5,()=>a(v),le,(g,M)=>{var V=Fi(),pt=s(V);H(()=>{nr(V,`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded cursor-pointer text-base sm:text-base
          ${(n()===a(M)?"bg-zinc-600 text-white":"text-zinc-400 hover:bg-zinc-700")??""}`),L(pt,a(M))}),F("click",V,()=>Oe.set(a(M))),N(g,V)});var ct=l(J,2),dt=s(ct),st=s(dt);H(()=>{a(u),Ut(()=>{a(c)})});var ft=s(st);ft.value=((ft.__value="")==null,"");var zt=l(ft);ce(zt,1,()=>a(c),le,(g,M)=>{var V=Zi(),pt={},kt=s(V);H(()=>{pt!==(pt=a(M).id)&&(V.value=(V.__value=a(M).id)==null?"":a(M).id),L(kt,a(M).title)}),N(g,V)});var wt=l(st,2);H(()=>{a(m),Ut(()=>{a(f)})});var yt=s(wt);yt.value=((yt.__value="")==null,"");var gt=l(yt);ce(gt,1,()=>a(f),le,(g,M)=>{var V=Bi(),pt={},kt=s(V);H(Bt=>{pt!==(pt=a(M))&&(V.value=(V.__value=a(M))==null?"":a(M)),L(kt,Bt)},[()=>T(a(M))],Rt),N(g,V)});var mt=l(wt,2);H(()=>{a(y),Ut(()=>{})});var xt=s(mt);xt.value=((xt.__value="")==null,"");var Et=l(xt);Et.value=(Et.__value="paid")==null?"":"paid";var jt=l(Et);jt.value=(jt.__value="unpaid")==null?"":"unpaid";var ht=l(jt);ht.value=(ht.__value="overdue")==null?"":"overdue";var Tt=l(dt,2);{var At=g=>{var M=Ri();F("click",M,A),N(g,M)};X(Tt,g=>{(a(u)||a(m)||a(y)||a(O))&&g(At)})}var Ct=l(ct,2),Zt=s(Ct),$=s(Zt),Z=l(Ct,2);ce(Z,5,()=>a(_),le,(g,M)=>{const V=Rt(()=>d(a(M).acf.customer));Mi(g,{get invoice(){return a(M)},get customerName(){return a(V)},get expanded(){return a(k)[a(M).id]},onShowDetails:R,onEdit:j,onDuplicate:()=>{rt(a(M))}})});var Dt=l(Z,2),P=s(Dt),D=s(P),w=s(D),nt=l(D,2),ut=s(nt),Y=s(ut),Q=l(ut,2),p=s(Q),C=l(Dt,2);{var K=g=>{qi(g,{get isOpen(){return a(E)},onClose:z,get editData(){return a(q)},get duplicatingInvoice(){return a(S)}})};X(C,g=>{a(E)&&g(K)})}H(g=>{L(w,`Celkem za rok ${n()??""}`),L(Y,`${g??""} Kč`),L(p,`Počet faktur: ${a(x).count??""}`)},[()=>a(x).total.toLocaleString("cs-CZ")],Rt),F("click",G,()=>b(E,!0)),Ye(st,()=>a(u),g=>b(u,g)),Ye(wt,()=>a(m),g=>b(m,g)),Ye(mt,()=>a(y),g=>b(y,g)),at($,()=>a(O),g=>b(O,g)),N(t,W),Lt(),i()}async function qn(t){const e=await fetch(`https://ares.gov.cz/ekonomicke-subjekty-v-be/rest/ekonomicke-subjekty/${t}`);if(!e.ok)throw new Error("API call failed");const r=await e.json();return{title:r.obchodniJmeno||"",ico:r.ico||"",dic:r.dic||"",street:`${r.sidlo.nazevUlice} ${r.sidlo.cisloDomovni}/${r.sidlo.cisloOrientacni}`,city:`${r.sidlo.nazevObce}${r.sidlo.nazevCastiObce?" - "+r.sidlo.nazevCastiObce:""}`,psc:r.sidlo.psc||""}}var Hi=B('<p class="text-red-500 text-base"> </p>'),Yi=oe('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Ukládám...',1),Ji=B('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/4 md:inset-y-24 bg-zinc-800 rounded-lg shadow-xl z-[999] overflow-y-auto"><div class="p-6 h-full flex flex-col"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl"> </h2> <button class="cursor-pointer text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-4 flex-1 flex flex-col"><div class="flex gap-4"><div class="flex-grow"><label for="customer_ico" class="block text-base text-zinc-400 mb-1">IČO</label> <input id="customer_ico" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="12345678"></div> <div class="flex items-end"><button type="button" class="cursor-pointer px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 disabled:opacity-50"> </button></div></div> <!> <div><label for="title" class="block text-base text-zinc-400 mb-1">Název firmy/Jméno</label> <input id="title" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="dic" class="block text-base text-zinc-400 mb-1">DIČ</label> <input id="dic" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></div> <div><label for="street" class="block text-base text-zinc-400 mb-1">Ulice</label> <input id="street" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div class="grid grid-cols-2 gap-4"><div><label for="city" class="block text-base text-zinc-400 mb-1">Město</label> <input id="city" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="psc" class="block text-base text-zinc-400 mb-1">PSČ</label> <input id="psc" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div></div> <div><label for="country" class="block text-base text-zinc-400 mb-1">Země</label> <input id="country" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="email" class="block text-base text-zinc-400 mb-1">Email</label> <input id="email" type="email" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></div> <div class="flex gap-4 pt-4 mt-auto"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="submit" class="cursor-pointer flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></form></div></div>',1);function Ki(t,e){$t(e,!1),ot(e,"isOpen",8);let r=ot(e,"onClose",8),i=ot(e,"editData",8,null),n=I({title:"",ico:"",dic:"",street:"",city:"",psc:"",country:"Česká republika",email:""}),o=I(!1),c=I(!1),v=I(null);async function _(){if(!a(n).ico||a(n).ico.length!==8){b(v,"IČO musí mít 8 číslic");return}try{b(o,!0),b(v,null);const $=await qn(a(n).ico);b(n,{...a(n),...$})}catch{b(v,"Nepodařilo se načíst data z ARES")}finally{b(o,!1)}}function f($){const Z=$.customer;return{...Z,id:Number(Z.id),acf:{ico:Z.acf.ico||"",dic:Z.acf.dic||"",street:Z.acf.street||"",city:Z.acf.city||"",psc:Z.acf.psc||"",country:Z.acf.country||"",email:Z.acf.email||""}}}async function x(){try{b(c,!0),b(v,null);const $=i()?await ci(Number(i().id),a(n)):await li(a(n)),Z=f($);Jt.update(Dt=>({...Dt,customers:i()?Dt.customers.map(P=>Number(P.id)===Number(i().id)?Z:P):[...Dt.customers,Z]})),Mt.set({type:"success",message:i()?"Zákazník byl úspěšně upraven":"Zákazník byl úspěšně vytvořen"}),setTimeout(r(),500)}catch($){b(v,$.message),Mt.set({type:"error",message:a(v)})}finally{b(c,!1)}}U(()=>ie(i()),()=>{i()&&b(n,{title:i().title,ico:i().acf.ico||"",dic:i().acf.dic||"",street:i().acf.street||"",city:i().acf.city||"",psc:i().acf.psc||"",country:i().acf.country||"Česká republika",email:i().acf.email||""})}),fe(),Ft();var h=Ji(),u=qt(h),m=l(u,2),y=s(m),O=s(y),T=s(O),d=s(T),E=l(T,2),q=l(O,2),S=s(q),j=s(S),z=l(s(j),2),k=l(j,2),R=s(k),rt=s(R),A=l(S,2);{var W=$=>{var Z=Hi(),Dt=s(Z);H(()=>L(Dt,a(v))),N($,Z)};X(A,$=>{a(v)&&$(W)})}var J=l(A,2),vt=l(s(J),2),G=l(J,2),_t=l(s(G),2),ct=l(G,2),dt=l(s(ct),2),st=l(ct,2),ft=s(st),zt=l(s(ft),2),wt=l(ft,2),yt=l(s(wt),2),gt=l(st,2),mt=l(s(gt),2),xt=l(gt,2),Et=l(s(xt),2),jt=l(xt,2),ht=s(jt),Tt=l(ht,2),At=s(Tt);{var Ct=$=>{var Z=Yi();N($,Z)},Zt=$=>{var Z=Fe();H(()=>L(Z,i()?"Uložit změny":"Vytvořit zákazníka")),N($,Z)};X(At,$=>{a(c)?$(Ct):$(Zt,!1)})}H(()=>{L(d,`${(i()?"Upravit":"Nový")??""} zákazník`),R.disabled=a(o),L(rt,a(o)?"Načítám...":"Načíst"),ht.disabled=a(c),Tt.disabled=a(c)}),F("click",u,function(...$){var Z;(Z=r())==null||Z.apply(this,$)}),F("click",E,function(...$){var Z;(Z=r())==null||Z.apply(this,$)}),at(z,()=>a(n).ico,$=>bt(n,a(n).ico=$)),F("click",R,_),at(vt,()=>a(n).title,$=>bt(n,a(n).title=$)),at(_t,()=>a(n).dic,$=>bt(n,a(n).dic=$)),at(dt,()=>a(n).street,$=>bt(n,a(n).street=$)),at(zt,()=>a(n).city,$=>bt(n,a(n).city=$)),at(yt,()=>a(n).psc,$=>bt(n,a(n).psc=$)),at(mt,()=>a(n).country,$=>bt(n,a(n).country=$)),at(Et,()=>a(n).email,$=>bt(n,a(n).email=$)),F("click",ht,function(...$){var Z;(Z=r())==null||Z.apply(this,$)}),F("submit",q,Ar(x)),N(t,h),Lt()}var Wi=oe('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Mažu...',1),Gi=B('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/3 md:inset-y-1/3 bg-zinc-800 rounded-lg shadow-xl z-[999]"><div class="p-6 h-full flex flex-col"><div class="flex justify-between items-start"><h2 class="text-2xl">Smazat zákazníka</h2> <button class="text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="my-6 text-zinc-300"><p>Opravdu chcete smazat zákazníka <strong> </strong>?</p> <p class="mt-2 text-red-400">Budou smazány i všechny faktury tohoto zákazníka!</p></div> <div class="flex gap-4 mt-auto"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-red-600 rounded hover:bg-red-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></div></div>',1);function Xi(t,e){$t(e,!1);let r=ot(e,"customer",8),i=ot(e,"onClose",8),n=I(!1);async function o(){try{b(n,!0);const z=await ui(r().id);Jt.update(k=>({...k,customers:k.customers.filter(R=>R.id!==r().id),invoices:k.invoices.filter(R=>Number(R.acf.customer)!==Number(r().id))})),Mt.set({type:"success",message:`Zákazník byl smazán včetně ${z.deleted_invoices} faktur`}),i()()}catch(z){Mt.set({type:"error",message:z.message||"Nepodařilo se smazat zákazníka"})}finally{b(n,!1)}}Ft();var c=Gi(),v=qt(c),_=l(v,2),f=s(_),x=s(f),h=l(s(x),2),u=l(x,2),m=s(u),y=l(s(m)),O=s(y),T=l(u,2),d=s(T),E=l(d,2),q=s(E);{var S=z=>{var k=Wi();N(z,k)},j=z=>{var k=Fe("Smazat zákazníka");N(z,k)};X(q,z=>{a(n)?z(S):z(j,!1)})}H(()=>{L(O,r().title),d.disabled=a(n),E.disabled=a(n)}),F("click",v,function(...z){var k;(k=i())==null||k.apply(this,z)}),F("click",h,function(...z){var k;(k=i())==null||k.apply(this,z)}),F("click",d,function(...z){var k;(k=i())==null||k.apply(this,z)}),F("click",E,o),N(t,c),Lt()}var Qi=B('<p class="text-blue-400"> </p>'),to=B('<div class="p-4 pt-0 border-t border-zinc-600"><div class="mt-2 text-base text-zinc-400 space-y-1"><p> </p> <p> </p> <p> </p> <p> </p> <p> </p> <!></div></div>'),eo=B('<div class="bg-zinc-700 rounded-lg overflow-hidden"><div class="p-4"><div class="flex flex-col sm:flex-row justify-between items-start gap-1"><div><h3 class="font-bold text-xl"> </h3> <p class="text-base text-zinc-400"> </p></div> <p class="font-bold text-xl"> </p></div> <div class="flex justify-end gap-2 mt-4"><button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Zobrazit detail"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-600 rounded-lg transition-colors" title="Upravit zákazníka"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></button> <button class="cursor-pointer p-1.5 text-zinc-400 hover:text-red-500 hover:bg-zinc-600 rounded-lg transition-colors" title="Smazat zákazníka"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg></button></div></div> <!></div>');function ro(t,e){$t(e,!1);let r=ot(e,"customer",8),i=ot(e,"stats",8),n=ot(e,"expanded",8),o=ot(e,"onShowDetails",8),c=ot(e,"onEdit",8),v=ot(e,"onDelete",8);function _(){o()(r().id)}Ft();var f=eo(),x=s(f),h=s(x),u=s(h),m=s(u),y=s(m),O=l(m,2),T=s(O),d=l(u,2),E=s(d),q=l(h,2),S=s(q),j=l(S,2),z=l(j,2),k=l(x,2);{var R=rt=>{var A=to(),W=s(A),J=s(W),vt=s(J),G=l(J,2),_t=s(G),ct=l(G,2),dt=s(ct),st=l(ct,2),ft=s(st),zt=l(st,2),wt=s(zt),yt=l(zt,2);{var gt=mt=>{var xt=Qi(),Et=s(xt);H(()=>L(Et,r().acf.email)),N(mt,xt)};X(yt,mt=>{r().acf.email&&mt(gt)})}H(()=>{L(vt,`IČO: ${r().acf.ico??""}`),L(_t,`DIČ: ${r().acf.dic??""}`),L(dt,r().acf.street),L(ft,`${r().acf.psc??""} ${r().acf.city??""}`),L(wt,r().acf.country)}),N(rt,A)};X(k,rt=>{n()&&rt(R)})}H(rt=>{L(y,r().title),L(T,`Počet faktur: ${i().count??""}`),L(E,`${rt??""} Kč`)},[()=>i().total.toLocaleString("cs-CZ")],Rt),F("click",S,_),F("click",j,()=>c()(r())),F("click",z,()=>v()(r())),N(t,f),Lt()}var no=B('<div class="bg-zinc-800 p-6 rounded-lg"><div class="flex items-center gap-x-4 mb-4"><h2 class="text-2xl">Zákazníci</h2> <button class="cursor-pointer px-4 py-2 bg-green-600 rounded hover:bg-green-700 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path></svg> Nový zákazník</button></div> <div class="space-y-4"></div></div> <!> <!>',1);function ao(t,e){$t(e,!1);const[r,i]=pe(),n=()=>Ht(Oe,"$selectedYear",r),o=I(),c=I();let v=ot(e,"data",8),_=I({});function f(A){const W=Number(A),J=a(c).filter(G=>Number(G.acf.customer)===W&&G.acf.maturity&&new Date(G.acf.maturity).getFullYear()===n()),vt=J.reduce((G,_t)=>{var ct;try{const dt=((ct=JSON.parse(_t.acf.items))==null?void 0:ct.items)||[];return G+dt.reduce((st,ft)=>st+(ft.price_per_unit||0)*(ft.quantity||0),0)}catch(dt){return console.error("Failed to parse invoice items:",dt),G}},0);return{count:J.length,total:vt,invoices:J}}function x(A){bt(_,a(_)[A]=!a(_)[A]),b(_,a(_))}let h=I(!1),u=I(null),m=I(null);function y(A){b(u,A),b(h,!0)}function O(){b(h,!1),b(u,null)}function T(A){b(m,A)}U(()=>ie(v()),()=>{var A;b(o,((A=v())==null?void 0:A.customers)||[])}),U(()=>ie(v()),()=>{var A;b(c,((A=v())==null?void 0:A.invoices)||[])}),fe(),Ft();var d=no(),E=qt(d),q=s(E),S=l(s(q),2),j=l(q,2);ce(j,5,()=>a(o),le,(A,W)=>{const J=Rt(()=>f(a(W).id));ro(A,{get customer(){return a(W)},get stats(){return a(J)},get expanded(){return a(_)[a(W).id]},onShowDetails:x,onEdit:y,onDelete:T})});var z=l(E,2);{var k=A=>{Ki(A,{get isOpen(){return a(h)},onClose:O,get editData(){return a(u)}})};X(z,A=>{a(h)&&A(k)})}var R=l(z,2);{var rt=A=>{Xi(A,{get customer(){return a(m)},onClose:()=>b(m,null)})};X(R,A=>{a(m)&&A(rt)})}F("click",S,()=>b(h,!0)),N(t,d),Lt(),i()}var io=B('<p class="text-red-500 text-base"> </p>'),oo=oe('<svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Ukládám...',1),so=B('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[998]"></div> <div class="fixed inset-4 md:inset-x-1/4 md:inset-y-24 bg-zinc-800 rounded-lg shadow-xl z-[999] overflow-y-auto"><div class="p-6"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl">Můj profil</h2> <button class="cursor-pointer text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-4"><div class="flex gap-4"><div class="flex-grow"><label for="ico" class="block text-base text-zinc-400 mb-1">IČO</label> <input id="ico" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="12345678"></div> <div class="flex items-end"><button type="button" class="cursor-pointer px-4 py-2 bg-blue-600 rounded hover:bg-blue-700 disabled:opacity-50"> </button></div></div> <!> <div><label for="title" class="block text-base text-zinc-400 mb-1">Název firmy/Jméno</label> <input id="title" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="dic" class="block text-base text-zinc-400 mb-1">DIČ</label> <input id="dic" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></div> <div><label for="street" class="block text-base text-zinc-400 mb-1">Ulice</label> <input id="street" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div class="grid grid-cols-2 gap-4"><div><label for="city" class="block text-base text-zinc-400 mb-1">Město</label> <input id="city" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="psc" class="block text-base text-zinc-400 mb-1">PSČ</label> <input id="psc" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div></div> <div><label for="country" class="block text-base text-zinc-400 mb-1">Země</label> <input id="country" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div class="grid grid-cols-2 gap-4"><div><label for="bank_account" class="block text-base text-zinc-400 mb-1">Číslo účtu</label> <input id="bank_account" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div> <div><label for="bank_code" class="block text-base text-zinc-400 mb-1">Kód banky</label> <input id="bank_code" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required></div></div> <div><label for="invoice_text" class="block text-base text-zinc-400 mb-1">Text na faktuře</label> <input id="invoice_text" type="text" class="w-full bg-zinc-700 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required> <p class="text-sm text-zinc-500 mt-1">Text zobrazený v patičce faktury</p></div> <div class="flex gap-4 pt-4"><button type="button" class="cursor-pointer flex-1 px-4 py-2 bg-zinc-600 rounded hover:bg-zinc-700 disabled:opacity-50">Zrušit</button> <button type="submit" class="cursor-pointer flex-1 px-4 py-2 bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 flex justify-center items-center gap-2"><!></button></div></form></div></div>',1);function lo(t,e){$t(e,!1);const[r,i]=pe(),n=()=>Ht(Ot,"$profile",r);let o=I(!1),c=I(!1),v=I(null);async function _(){if(!n().ico||n().ico.length!==8){b(v,"IČO musí mít 8 číslic");return}try{b(o,!0),b(v,null);const P=await qn(n().ico);Ot.set({...n(),...P})}catch{b(v,"Nepodařilo se načíst data z ARES")}finally{b(o,!1)}}async function f(){try{b(c,!0),b(v,null);const P=await si(n());P.status==="success"&&(Jt.update(D=>({...D,profile:P.profile})),Mt.set({type:"success",message:"Profil byl úspěšně uložen"}),setTimeout(x,500))}catch{b(v,null),Mt.set({type:"error",message:"Nepodařilo se uložit profil. Zkuste to prosím znovu."})}finally{b(c,!1)}}function x(){ar.set(!1)}Ft();var h=so(),u=qt(h),m=l(u,2),y=s(m),O=s(y),T=l(s(O),2),d=l(O,2),E=s(d),q=s(E),S=l(s(q),2),j=l(q,2),z=s(j),k=s(z),R=l(E,2);{var rt=P=>{var D=io(),w=s(D);H(()=>L(w,a(v))),N(P,D)};X(R,P=>{a(v)&&P(rt)})}var A=l(R,2),W=l(s(A),2),J=l(A,2),vt=l(s(J),2),G=l(J,2),_t=l(s(G),2),ct=l(G,2),dt=s(ct),st=l(s(dt),2),ft=l(dt,2),zt=l(s(ft),2),wt=l(ct,2),yt=l(s(wt),2),gt=l(wt,2),mt=s(gt),xt=l(s(mt),2),Et=l(mt,2),jt=l(s(Et),2),ht=l(gt,2),Tt=l(s(ht),2),At=l(ht,2),Ct=s(At),Zt=l(Ct,2),$=s(Zt);{var Z=P=>{var D=oo();N(P,D)},Dt=P=>{var D=Fe("Uložit profil");N(P,D)};X($,P=>{a(c)?P(Z):P(Dt,!1)})}H(()=>{z.disabled=a(o),L(k,a(o)?"Načítám...":"Načíst"),Ct.disabled=a(c),Zt.disabled=a(c)}),F("click",u,x),F("click",T,x),at(S,()=>n().ico,P=>Wt(Ot,tt(n).ico=P,tt(n))),F("click",z,_),at(W,()=>n().title,P=>Wt(Ot,tt(n).title=P,tt(n))),at(vt,()=>n().dic,P=>Wt(Ot,tt(n).dic=P,tt(n))),at(_t,()=>n().street,P=>Wt(Ot,tt(n).street=P,tt(n))),at(st,()=>n().city,P=>Wt(Ot,tt(n).city=P,tt(n))),at(zt,()=>n().psc,P=>Wt(Ot,tt(n).psc=P,tt(n))),at(yt,()=>n().country,P=>Wt(Ot,tt(n).country=P,tt(n))),at(xt,()=>n().bank_account,P=>Wt(Ot,tt(n).bank_account=P,tt(n))),at(jt,()=>n().bank_code,P=>Wt(Ot,tt(n).bank_code=P,tt(n))),at(Tt,()=>n().invoice_text,P=>Wt(Ot,tt(n).invoice_text=P,tt(n))),F("click",Ct,x),F("submit",d,Ar(f)),N(t,h),Lt(),i()}var co=B('<a class="px-5.5 py-2 bg-red-500 rounded hover:bg-red-700 text-center">Odhlásit se</a>'),uo=B('<div class="flex flex-col sm:flex-row justify-between items-center sm:items-start gap-4 sm:gap-0"><div class="text-center sm:text-left"><h2 class="text-2xl"> </h2> <p class="text-base text-zinc-400 mt-1"> </p></div> <div class="flex flex-row sm:flex-col items-center sm:items-end gap-2"><button class="cursor-pointer px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Upravit profil</button> <!></div></div>'),vo=B('<a class="px-6 py-3 bg-red-500 rounded hover:bg-red-700 text-center">Odhlásit se</a>'),fo=B('<div class="text-center"><h2 class="text-2xl mb-4">Fakturační údaje</h2> <p class="text-zinc-400 mb-4">Pro vytváření faktur je potřeba vyplnit vaše fakturační údaje</p> <div class="flex flex-row justify-center items-center gap-2"><button class="cursor-pointer px-6 py-3 bg-green-600 rounded hover:bg-green-700 font-medium">Vyplnit údaje</button> <!></div></div>'),po=B('<div class="bg-zinc-800 p-4 sm:p-6 rounded-lg"><!></div> <!>',1);function _o(t,e){$t(e,!1);const[r,i]=pe(),n=()=>Ht(Ot,"$profile",r),o=()=>Ht(Jt,"$apiData",r),c=()=>Ht(ar,"$isProfileModalOpen",r),v=I(),_=I();function f(){ar.set(!0)}U(()=>n(),()=>{b(v,n().title&&n().ico)}),U(()=>o(),()=>{var d;b(_,(d=o())==null?void 0:d.wp_logout_url)}),fe(),Ft();var x=po(),h=qt(x),u=s(h);{var m=d=>{var E=uo(),q=s(E),S=s(q),j=s(S),z=l(S,2),k=s(z),R=l(q,2),rt=s(R),A=l(rt,2);{var W=J=>{var vt=co();H(()=>Dr(vt,"href",a(_))),N(J,vt)};X(A,J=>{a(_)&&J(W)})}H(()=>{L(j,n().title),L(k,`IČO: ${n().ico??""}`)}),F("click",rt,f),N(d,E)},y=d=>{var E=fo(),q=l(s(E),4),S=s(q),j=l(S,2);{var z=k=>{var R=vo();H(()=>Dr(R,"href",a(_))),N(k,R)};X(j,k=>{a(_)&&k(z)})}F("click",S,f),N(d,E)};X(u,d=>{a(v)?d(m):d(y,!1)})}var O=l(h,2);{var T=d=>{lo(d,{})};X(O,d=>{c()&&d(T)})}N(t,x),Lt(),i()}var bo=oe('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),go=oe('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>'),mo=B('<div class="fixed top-4 right-4 left-4 md:left-auto md:right-4 md:w-96 p-4 rounded-lg shadow-lg z-50 transition-all duration-300 transform translate-y-0 opacity-100" role="alert"><div class="flex items-center gap-3"><!> <p class="text-white font-medium"> </p></div></div>');function xo(t,e){$t(e,!1);const[r,i]=pe(),n=()=>Ht(Mt,"$notification",r);let o=I();An(()=>()=>{a(o)&&clearTimeout(a(o))}),U(()=>(n(),a(o),Mt),()=>{n()&&(a(o)&&clearTimeout(a(o)),b(o,setTimeout(()=>{Mt.set(null)},2e3)))}),fe(),Ft();var c=$n(),v=qt(c);{var _=f=>{var x=mo(),h=s(x),u=s(h);{var m=d=>{var E=bo();N(d,E)},y=d=>{var E=go();N(d,E)};X(u,d=>{n().type==="success"?d(m):d(y,!1)})}var O=l(u,2),T=s(O);H(()=>{Wr(x,"bg-green-500",n().type==="success"),Wr(x,"bg-red-500",n().type==="error"),L(T,n().message)}),N(f,x)};X(v,f=>{n()&&f(_)})}N(t,c),Lt(),i()}var ho=B('<p class="prose prose-xl md:prose-2xl prose-invert my-4 md:my-8 mx-auto text-center animate-pulse">Načítám si svoje serepetičky...</p>'),wo=B('<div class="grid grid-cols-1 lg:grid-cols-3 items-start gap-4 md:gap-6 mb-4 md:mb-6 mt-6 md:mt-10"><div class="lg:col-span-2 order-2 lg:order-0"><!></div> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6"><!> <!></div>',1),yo=B('<div><!> <main class="container mx-auto px-4 py-8 flex-grow"><h1 class="text-3xl sm:text-4xl md:text-6xl lg:text-8xl font-bold uppercase font-serif tracking-widest text-center whitespace-nowrap">F<span class="inline-block -skew-10">r</span>akturuj</h1> <!></main> <footer class="container mx-auto px-4 py-4 text-center text-zinc-600">by <a href="http://rickode.cz" target="_blank" rel="noopener" class="hover:text-zinc-400 transition-colors">Rickode</a></footer></div>');function ko(t,e){$t(e,!1);const[r,i]=pe(),n=()=>Ht(ar,"$isProfileModalOpen",r),o=()=>Ht(Jt,"$apiData",r);An(()=>{oi().then(u=>{Jt.set(u),u.profile&&Ot.set(u.profile),ii()})}),Ft();var c=yo(),v=s(c);xo(v,{});var _=l(v,2),f=l(s(_),2);{var x=u=>{var m=ho();N(u,m)},h=u=>{var m=wo(),y=qt(m),O=s(y),T=s(O);gi(T,{get data(){return o()}});var d=l(O,2);_o(d,{});var E=l(y,2),q=s(E);Ui(q,{get data(){return o()}});var S=l(q,2);ao(S,{get data(){return o()}}),N(u,m)};X(f,u=>{o()?u(h,!1):u(x)})}H(()=>nr(c,`bg-zinc-900 min-h-screen text-white flex flex-col ${(n()?"overflow-hidden h-screen":"")??""}`)),N(t,c),Lt(),i()}Za(ko,{target:document.getElementById("app")});
